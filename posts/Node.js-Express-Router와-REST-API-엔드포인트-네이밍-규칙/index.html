<!DOCTYPE html><html lang="ko-KR" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="day-prompt" content="d ago"><meta name="hour-prompt" content="hr ago"><meta name="minute-prompt" content="min ago"><meta name="justnow-prompt" content="just now"><meta name="generator" content="Jekyll v4.2.0" /><meta property="og:title" content="[node.js] express router와 rest api 엔드포인트 네이밍 규칙" /><meta property="og:locale" content="ko_KR" /><meta name="description" content="Express의 endpoint path들을 구조적으로 관리하기 위한 Router를 알아보도록 하자. route : 길, Router : 길 찾는 놈." /><meta property="og:description" content="Express의 endpoint path들을 구조적으로 관리하기 위한 Router를 알아보도록 하자. route : 길, Router : 길 찾는 놈." /><link rel="canonical" href="/posts/Node.js-Express-Router%EC%99%80-REST-API-%EC%97%94%EB%93%9C%ED%8F%AC%EC%9D%B8%ED%8A%B8-%EB%84%A4%EC%9D%B4%EB%B0%8D-%EA%B7%9C%EC%B9%99/" /><meta property="og:url" content="/posts/Node.js-Express-Router%EC%99%80-REST-API-%EC%97%94%EB%93%9C%ED%8F%AC%EC%9D%B8%ED%8A%B8-%EB%84%A4%EC%9D%B4%EB%B0%8D-%EA%B7%9C%EC%B9%99/" /><meta property="og:site_name" content="머리속에 다 있어요" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2021-09-05T00:00:00+09:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="[node.js] express router와 rest api 엔드포인트 네이밍 규칙" /><meta name="google-site-verification" content="google_meta_tag_verification" /> <script type="application/ld+json"> {"description":"Express의 endpoint path들을 구조적으로 관리하기 위한 Router를 알아보도록 하자. route : 길, Router : 길 찾는 놈.","url":"/posts/Node.js-Express-Router%EC%99%80-REST-API-%EC%97%94%EB%93%9C%ED%8F%AC%EC%9D%B8%ED%8A%B8-%EB%84%A4%EC%9D%B4%EB%B0%8D-%EA%B7%9C%EC%B9%99/","@type":"BlogPosting","headline":"[node.js] express router와 rest api 엔드포인트 네이밍 규칙","dateModified":"2021-09-11T01:14:38+09:00","datePublished":"2021-09-05T00:00:00+09:00","mainEntityOfPage":{"@type":"WebPage","@id":"/posts/Node.js-Express-Router%EC%99%80-REST-API-%EC%97%94%EB%93%9C%ED%8F%AC%EC%9D%B8%ED%8A%B8-%EB%84%A4%EC%9D%B4%EB%B0%8D-%EA%B7%9C%EC%B9%99/"},"@context":"https://schema.org"}</script><title>[node.js] express router와 rest api 엔드포인트 네이밍 규칙 | 머리속에 다 있어요</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="머리속에 다 있어요"><meta name="application-name" content="머리속에 다 있어요"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://fonts.gstatic.com"><link rel="preconnect" href="https://www.google-analytics.com" crossorigin="use-credentials"><link rel="dns-prefetch" href="https://www.google-analytics.com"><link rel="preconnect" href="https://www.googletagmanager.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://www.googletagmanager.com"><link rel="preconnect" href="https://cdn.jsdelivr.net"><link rel="dns-prefetch" href="https://cdn.jsdelivr.net"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1.1.0/dist/magnific-popup.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script><body data-spy="scroll" data-target="#toc"><div id="sidebar" class="d-flex flex-column align-items-end" lang="">
<div class="profile-wrapper text-center">
<div id="avatar"> <a href="/" alt="avatar" class="mx-auto"> <img src="/img/site/profile.jpeg" alt="avatar" onerror="this.style.display='none'"> </a>
</div>
<div class="site-title mt-3"> <a href="/">머리속에 다 있어요</a>
</div>
<div class="site-subtitle font-italic">아닐걸?</div>
</div>
<ul class="w-100">
<li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a>
</li>
<li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a>
</li>
<li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tags ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a>
</li>
<li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a>
</li>
<li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info ml-xl-3 mr-xl-3 unloaded"></i> <span>ABOUT</span> </a>
</li>
</ul>
<div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center"> <a href="https://github.com/jaeone94" aria-label="github" class="order-3" target="_blank" rel="noopener"> <i class="fab fa-github-alt"></i> </a> <a href="javascript:location.href%20=%20'mailto:'%20+%20%5B'jaeone.prt','gmail.com'%5D.join('@')" aria-label="email" class="order-4"> <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" aria-label="rss" class="order-5"> <i class="fas fa-rss"></i> </a> <span class="icon-border order-2"></span> <span id="mode-toggle-wrapper" class="order-1"> <i class="mode-toggle fas fa-adjust"></i> <script type="text/javascript"> class ModeToggle { static get MODE_KEY() { return "mode"; } static get DARK_MODE() { return "dark"; } static get LIGHT_MODE() { return "light"; } constructor() { if (this.hasMode) { if (this.isDarkMode) { if (!this.isSysDarkPrefer) { this.setDark(); } } else { if (this.isSysDarkPrefer) { this.setLight(); } } } var self = this; /* always follow the system prefers */ this.sysDarkPrefers.addListener(function() { if (self.hasMode) { if (self.isDarkMode) { if (!self.isSysDarkPrefer) { self.setDark(); } } else { if (self.isSysDarkPrefer) { self.setLight(); } } self.clearMode(); } self.updateMermaid(); }); } /* constructor() */ setDark() { $('html').attr(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); } setLight() { $('html').attr(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); } clearMode() { $('html').removeAttr(ModeToggle.MODE_KEY); sessionStorage.removeItem(ModeToggle.MODE_KEY); } get sysDarkPrefers() { return window.matchMedia("(prefers-color-scheme: dark)"); } get isSysDarkPrefer() { return this.sysDarkPrefers.matches; } get isDarkMode() { return this.mode == ModeToggle.DARK_MODE; } get isLightMode() { return this.mode == ModeToggle.LIGHT_MODE; } get hasMode() { return this.mode != null; } get mode() { return sessionStorage.getItem(ModeToggle.MODE_KEY); } /* get the current mode on screen */ get modeStatus() { if (this.isDarkMode || (!this.hasMode && this.isSysDarkPrefer) ) { return ModeToggle.DARK_MODE; } else { return ModeToggle.LIGHT_MODE; } } updateMermaid() { if (typeof mermaid !== "undefined") { let expectedTheme = (this.modeStatus === ModeToggle.DARK_MODE? "dark" : "default"); let config = { theme: expectedTheme }; /* re-render the SVG › <https://github.com/mermaid-js/mermaid/issues/311#issuecomment-332557344> */ $(".mermaid").each(function() { let svgCode = $(this).prev().children().html(); $(this).removeAttr("data-processed"); $(this).html(svgCode); }); mermaid.initialize(config); mermaid.init(undefined, ".mermaid"); } } flipMode() { if (this.hasMode) { if (this.isSysDarkPrefer) { if (this.isLightMode) { this.clearMode(); } else { this.setLight(); } } else { if (this.isDarkMode) { this.clearMode(); } else { this.setDark(); } } } else { if (this.isSysDarkPrefer) { this.setLight(); } else { this.setDark(); } } this.updateMermaid(); } /* flipMode() */ } /* ModeToggle */ let toggle = new ModeToggle(); $(".mode-toggle").click(function() { toggle.flipMode(); }); </script> </span>
</div>
</div><div id="topbar-wrapper" class="row justify-content-center topbar-down"><div id="topbar" class="col-11 d-flex h-100 align-items-center justify-content-between"> <span id="breadcrumb"> <span> <a href="/"> Home </a> </span> <span>[node.js] express router와 rest api 엔드포인트 네이밍 규칙</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div>
<i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..."> <i class="fa fa-times-circle fa-fw" id="search-cleaner"></i> </span> <span id="search-cancel">Cancel</span>
</div></div><div id="main-wrapper">
<div id="main">
<div class="row">
<div id="post-wrapper" class="col-12 col-lg-11 col-xl-8"><div class="post pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4">
<h1 data-toc-skip>[node.js] express router와 rest api 엔드포인트 네이밍 규칙</h1>
<div class="post-meta text-muted d-flex flex-column">
<div> <span class="semi-bold"> Jaeone94 </span> on <span class="timeago " data-toggle="tooltip" data-placement="bottom" title="Sun, Sep 5, 2021, 12:00 AM +0900">Sep 5<i class="unloaded">2021-09-05T00:00:00+09:00</i> </span>
</div>
<div> <span> Updated <span class="timeago lastmod" data-toggle="tooltip" data-placement="bottom" title="Sat, Sep 11, 2021, 1:14 AM +0900">Sep 11<i class="unloaded">2021-09-11T01:14:38+09:00</i> </span> </span> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="8963 words">49 min read</span>
</div>
</div>
<div class="post-content">
<p>Express의 endpoint path들을 구조적으로 관리하기 위한 Router를 알아보도록 하자.</p>
<blockquote><p>route : 길, Router : 길 찾는 놈.</p></blockquote>
<p>아마 Router 를 배우기 전이라면 app.js 안에 수 없이 많은 api 가 존재할 것이다. end-point 의 종류도 다양할 것이고. 어느정도 규모가 큰 시스템(사실 그렇게 크지 않아도)에선 app.js의 코드행도 굉장히 길어질 것이고. 유지보수에도 난항을 겪을 것이다.</p>
<p>따라서 api를 어느정도 분리하여 관리할 필요가 있는데 Router가 그 역할을 해준다.</p>
<p>그런데 router에 들어가기에 앞서서, 구조적으로 분리한다는데 “왜 분리해야하는지?”. <br> 즉, <strong>WHY</strong>에 대한 대답은 위에서 얘기했듯이 유지보수가 불편하다인데.</p>
<p>한번 어떻게 분리할지 <strong>HOW</strong> 에 대해서 생각해보자.<br> Router는 길을 찾는 놈인데 그 길이 바로 URL 이다. 즉 Router는 URL에 따라 분리되고 배치될 것이다.</p>
<h2 id="-restrestful-api의-end-point-resource-명명규칙-">** REST(RESTful) API의 End-Point Resource 명명규칙 **</h2>
<blockquote><p>REST API란 ?<br> “Representational State Transfer”의 줄임말인 REST 아키텍처의 제약 조건을 준수하는 애플리케이션 프로그래밍 인터페이스.</p></blockquote>
<p>개발을 업으로 삼고 있거나, 막 배우기 시작한 학생들도 한번쯤은 다 들어본 단어일 것이다.<br> REST 아키텍처의 그 외 특징들은 뭐.. 무상태성, 캐시의 처리가 가능함, 계층구조 .. 등등이 있는데. (자세히 설명하면 끝이 없음 !!!) <br> 가장 핵심적인 내용은 URL과 HTTP 1.1 METHOD (GET, POST, PUT, DELETE 등) 의 조합으로 기능을 호출한다는 것이고<br> 해당 호출의 각 URL을 API 입장에선 end-point라고 한다.</p>
<p>그 중에서도 오늘 알아 볼 것은 그 아키텍처 규칙들 중에서도 end-point 네이밍 규칙들인데. Router로 넘어가기 전에 기본적으로 알고있으면 좋은 Background 지식이니 알고 넘어가도록 하자. <img class="emoji" title=":grin:" alt=":grin:" src="https://github.githubassets.com/images/icons/emoji/unicode/1f601.png" height="20" width="20"></p>
<p>end-point는 엿장수 맘대로 이름을 지을 수 있지만 그렇게 하면 나중에 땅을치고 후회할 것이다. 네이밍 규칙을 정해놓고 잘 지키지 않으면 맨날 까먹어서 “아.. 그 기능 end-point가 뭐였지 ?” 하고 개발자 도구를 열어서 확인하는 등의 일이 빈번히 발생한다. (<del>내가 그랬다. 헤헤 <img class="emoji" title=":scream:" alt=":scream:" src="https://github.githubassets.com/images/icons/emoji/unicode/1f631.png" height="20" width="20"></del>) 게다가 1인 개발이면 몰라도 다른 개발자와 협업을 해야할 때, 내 맘대로 이름을 짓다가는 러닝커브가 올라가서 업무생산성이 떨어질 것이다.</p>
<p>그래서 이런 불상사를 방지하기 위해 어느정도 표준화된 규칙이 존재하는데 <br> Express Router를 배우기 전에 <a href="https://restfulapi.net/resource-naming/">REST API Endpoint 이름 지정 가이드</a>에서 소개한 기본적인 내용을 먼저 배워보자.</p>
<p><strong>1. 먼저 간단히 정말 순수하게 이름을 짓는 방법이다.</strong></p>
<ul>
<li>
<strong>명사 사용</strong> <br> 동사는 웬만하면 쓰지말자. REST API는 리소스. 즉, <strong>자원</strong> 기반이어야 한다.</li>
<li>
<strong>직관적이고 축약되지 않은 이름을 사용</strong> <br> 제 3자가 보더라도 이 리소스가 뭔지는 알아야한다. <del>user-accounts를 ua라고 짓는 미친짓은 하지말자</del>
</li>
<li>
<strong>슬래시(‘/’)를 사용하여 계층구조로 작성(오늘 배울 핵심!)</strong> <br> 예를들어 <code class="language-plaintext highlighter-rouge">https://BASEURL/users/1/account</code> 이런식으로 전체 유저들 중에서 1번 유저의 계좌를 검색할 때는 상위 리소스부터 하위로 계층구조를 나타내면서 작성해야한다. <br> ++ 하나 더 추가하자면 마지막 리소스에는 /를 붙이지 말자. (그게 보기 이쁘니까)</li>
<li>
<strong>하이픈(‘-‘)으로 단어를 구분해야함</strong> <br> 엔드포인트에 여러 단어가 포함된 경우라면 언더바나 카멜케이스를 사용하지 말고 하이픈으로 구분하자. <br> userAccounts (x), user_accounts (x), user-accounts (o)</li>
<li>
<strong>소문자 사용</strong><br> 가능하면 소문자만 사용하자.</li>
<li>
<strong>특수문자는 사용하지 말자</strong><br> 제정신이라면 이런 짓은 하지말자..</li>
<li>
<strong>파일 확장자는 피하자</strong> <br> 호출의 응답이 특정 파일이라고 하더라도 굳이 쓰지 않아도 되기 때문에 괜히 더 복잡해 보일 뿐이다.</li>
</ul>
<p><strong>2. 자원에 대한 구분</strong> REST API 에서 end-point는 3개의 자원과 컨트롤러로 구분되는데 다음과 같다.</p>
<ul>
<li><p><strong>collection(컬렉션)</strong><br> 데이터베이스로 비유하자면 릴레이션(테이블)과 유사한 개념인데 특정 객체들의 집합이라고 생각하면 된다. 그래도 어렵다고 ? 카카오게임즈에 가입한 내가 하나의 객체라면 컬렉션은 카카오게임즈의 “회원<strong>들</strong>” 이다. ! 실제 사용 예를 들어보자면 BASEURL/<strong>users</strong> 를 생각하면 된다. 만약에 여기서 요청 method 를 GET으로 선택한다면 전체 사용자의 리스트를 넘겨주는 동작을 할 것이다. <br> 당연히 집합. 즉, 복수의 개념으로 일반적으로 복수형태의 단어를 사용한다. user (x) users (o)</p></li>
<li><p><strong>document(도큐먼트)</strong><br> 이건 컬렉션의 하위 개념. 즉, <strong>객체</strong>를 의미한다. 마찬가지로 데이터베이스로 비유하자면 튜플이나 ROW 가 된다.<br> 일반적으로 컬렉션의 하위에 슬래시(‘/’)로 구분되어 위치하고 해당 객체의 레어키나 단수형 명사로 사용된다. <br> ex) <code class="language-plaintext highlighter-rouge">BASEURL/users/{user-id}, BASEURL/users/admin</code></p></li>
<li><p><strong>store(스토어)</strong><br> 간단히 쇼핑몰의 장바구니를 생각하면 되는데. Client가 관리하는 데이터 집합이라고 생각하면 된다. 좀 찾아보니 절대 새로운 url을 생성하지 않는다고 하는데. 뭔 소린가 잘 모르겠고.. 단순하게 데이터를 서버에 저장하냐 클라이언트에 저장하냐 차이인 것 같다. 컬렉션과 마찬가지로 복수형태의 단어를 사용한다. 잘 이해가 안된다면 아래 예시를 보면 답답함이 조금 사라진다. ex) <code class="language-plaintext highlighter-rouge">BASEURL/user/1/carts</code>, <code class="language-plaintext highlighter-rouge">BASEURL/user/1/favorites</code>, <code class="language-plaintext highlighter-rouge">BASEURL/user/1/playlists</code></p></li>
<li><p><strong>controller(컨트롤러)</strong><br> 이건 유일한 <strong>예외</strong>로 자원이 아니라 function(함수)를 의미한다. 즉, 동작이나 행위를 나타냄으로 <strong>동사형 단어</strong>를 사용한다.<br> 장바구니를 예로 들어보자. 자원에 대한 동작을 METHOD 로 구분한다곤 하지만 그걸로 표현이 안되는 행위가 있을 수 있다.<br> 그럴 때 행위에 대한 동사형 단어를 간단하게 작성해주자.</p></li>
</ul>
<div lang="plaintext" class="language-plaintext highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr>
<td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre></td>
<td class="rouge-code"><pre>GET /carts : 장바구니 리스트를 불러온다.
POST /carts : 장바구니에 살거 하나를 추가한다.
PUT /carts/1 : 장바구니 안에 1번 상품을 수정한다. 
DELETE /carts : 장바구니를 비운다.
DELETE /carts/1 : 장바구니 안에 1번 상품을 제거한다. 

그럼 장바구니안에 살 것들을 결제하는 기능은 ? 
POST /carts/checkout &lt;&lt; 동사형 단어 
</pre></td>
</tr></tbody></table></code></div></div>
<h2 id="이제-express-router-로-end-point에-따라-api를-분리해보자">이제 Express Router 로 end-point에 따라 api를 분리해보자</h2>
<p>길고 긴 재미없는 이론을 배웠으면 드디어 router를 사용해서 코드를 분리해볼건데<br> 위에서 배운 것들 중에 반드시 알아야할 <strong>가장 핵심적인 개념은 end-point가 자원단위의 계층구조를 갖는다는 것이다.</strong></p>
<p>그럼 거두절미하고 Router 사용법을 알아보자. (드디어)</p>
<p>다음과 같은 코드가 있다고 가정해보자</p>
<h3 id="old-appjs">[OLD] app.js</h3>
<div lang="js" class="language-js highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr>
<td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171
172
173
174
175
176
177
178
179
180
181
182
183
184
185
186
187
188
189
190
191
192
193
194
195
196
197
198
199
200
201
202
203
204
205
206
207
208
209
210
211
212
213
</pre></td>
<td class="rouge-code"><pre><span class="kd">const</span> <span class="nx">express</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">express</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">app</span> <span class="o">=</span> <span class="nx">express</span><span class="p">();</span>
<span class="nx">app</span><span class="p">.</span><span class="kd">set</span><span class="p">(</span><span class="dl">'</span><span class="s1">port</span><span class="dl">'</span><span class="p">,</span> <span class="mi">3000</span><span class="p">);</span>
<span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="nx">express</span><span class="p">.</span><span class="nx">json</span><span class="p">());</span>

<span class="kd">let</span> <span class="nx">presidents</span> <span class="o">=</span> <span class="p">[</span> <span class="c1">//DB상에 역대대통령 데이터가 있다고 가정해보자.</span>
    <span class="p">{</span><span class="na">id</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="na">name</span><span class="p">:</span> <span class="dl">'</span><span class="s1">이승만</span><span class="dl">'</span><span class="p">},</span>
    <span class="p">{</span><span class="na">id</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="na">name</span><span class="p">:</span> <span class="dl">'</span><span class="s1">윤보선</span><span class="dl">'</span><span class="p">},</span>
    <span class="p">{</span><span class="na">id</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span> <span class="na">name</span><span class="p">:</span> <span class="dl">'</span><span class="s1">박정희</span><span class="dl">'</span><span class="p">},</span>
    <span class="p">{</span><span class="na">id</span><span class="p">:</span> <span class="mi">4</span><span class="p">,</span> <span class="na">name</span><span class="p">:</span> <span class="dl">'</span><span class="s1">최규하</span><span class="dl">'</span><span class="p">},</span>
    <span class="p">{</span><span class="na">id</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span> <span class="na">name</span><span class="p">:</span> <span class="dl">'</span><span class="s1">전두환</span><span class="dl">'</span><span class="p">},</span>
    <span class="p">{</span><span class="na">id</span><span class="p">:</span> <span class="mi">6</span><span class="p">,</span> <span class="na">name</span><span class="p">:</span> <span class="dl">'</span><span class="s1">노태우</span><span class="dl">'</span><span class="p">},</span>
    <span class="p">{</span><span class="na">id</span><span class="p">:</span> <span class="mi">7</span><span class="p">,</span> <span class="na">name</span><span class="p">:</span> <span class="dl">'</span><span class="s1">노태우</span><span class="dl">'</span><span class="p">},</span>
    <span class="p">{</span><span class="na">id</span><span class="p">:</span> <span class="mi">8</span><span class="p">,</span> <span class="na">name</span><span class="p">:</span> <span class="dl">'</span><span class="s1">김영삼</span><span class="dl">'</span><span class="p">},</span>
    <span class="p">{</span><span class="na">id</span><span class="p">:</span> <span class="mi">9</span><span class="p">,</span> <span class="na">name</span><span class="p">:</span> <span class="dl">'</span><span class="s1">이명박</span><span class="dl">'</span><span class="p">},</span>
    <span class="p">{</span><span class="na">id</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span> <span class="na">name</span><span class="p">:</span> <span class="dl">'</span><span class="s1">박근혜</span><span class="dl">'</span><span class="p">},</span>
    <span class="p">{</span><span class="na">id</span><span class="p">:</span> <span class="mi">11</span><span class="p">,</span> <span class="na">name</span><span class="p">:</span> <span class="dl">'</span><span class="s1">문재인</span><span class="dl">'</span><span class="p">}];</span>

<span class="kd">let</span> <span class="nx">languages</span> <span class="o">=</span> <span class="p">[</span> <span class="c1">//프로그래밍 언어들</span>
    <span class="p">{</span><span class="na">id</span> <span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="na">name</span> <span class="p">:</span> <span class="dl">'</span><span class="s1">C</span><span class="dl">'</span><span class="p">},</span>
    <span class="p">{</span><span class="na">id</span> <span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="na">name</span> <span class="p">:</span> <span class="dl">'</span><span class="s1">C++</span><span class="dl">'</span><span class="p">},</span>
    <span class="p">{</span><span class="na">id</span> <span class="p">:</span> <span class="mi">3</span><span class="p">,</span> <span class="na">name</span> <span class="p">:</span> <span class="dl">'</span><span class="s1">C#</span><span class="dl">'</span><span class="p">},</span>
    <span class="p">{</span><span class="na">id</span> <span class="p">:</span> <span class="mi">4</span><span class="p">,</span> <span class="na">name</span> <span class="p">:</span> <span class="dl">'</span><span class="s1">JAVA</span><span class="dl">'</span><span class="p">},</span>
    <span class="p">{</span><span class="na">id</span> <span class="p">:</span> <span class="mi">5</span><span class="p">,</span> <span class="na">name</span> <span class="p">:</span> <span class="dl">'</span><span class="s1">Cotlin</span><span class="dl">'</span><span class="p">},</span>
    <span class="p">{</span><span class="na">id</span> <span class="p">:</span> <span class="mi">6</span><span class="p">,</span> <span class="na">name</span> <span class="p">:</span> <span class="dl">'</span><span class="s1">Javascript</span><span class="dl">'</span><span class="p">},</span>
    <span class="p">{</span><span class="na">id</span> <span class="p">:</span> <span class="mi">7</span><span class="p">,</span> <span class="na">name</span> <span class="p">:</span> <span class="dl">'</span><span class="s1">python</span><span class="dl">'</span><span class="p">},</span>
    <span class="p">{</span><span class="na">id</span> <span class="p">:</span> <span class="mi">8</span><span class="p">,</span> <span class="na">name</span> <span class="p">:</span> <span class="dl">'</span><span class="s1">PHP</span><span class="dl">'</span><span class="p">},</span>
    <span class="p">{</span><span class="na">id</span> <span class="p">:</span> <span class="mi">9</span><span class="p">,</span> <span class="na">name</span> <span class="p">:</span> <span class="dl">'</span><span class="s1">Ruby</span><span class="dl">'</span><span class="p">},</span>
    <span class="p">{</span><span class="na">id</span> <span class="p">:</span> <span class="mi">10</span><span class="p">,</span> <span class="na">name</span> <span class="p">:</span> <span class="dl">'</span><span class="s1">Objective-C</span><span class="dl">'</span><span class="p">},</span>
    <span class="p">{</span><span class="na">id</span> <span class="p">:</span> <span class="mi">11</span><span class="p">,</span> <span class="na">name</span> <span class="p">:</span> <span class="dl">'</span><span class="s1">Swift</span><span class="dl">'</span><span class="p">}];</span>

<span class="kd">let</span> <span class="nx">books</span> <span class="o">=</span> <span class="p">[</span> <span class="c1">//프로그래밍 언어 관련 서적</span>
    <span class="p">{</span><span class="na">id</span> <span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="na">language_id</span> <span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="na">name</span> <span class="p">:</span> <span class="dl">'</span><span class="s1">혼자 공부하는 C언어</span><span class="dl">'</span><span class="p">},</span>
    <span class="p">{</span><span class="na">id</span> <span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="na">language_id</span> <span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="na">name</span> <span class="p">:</span> <span class="dl">'</span><span class="s1">Do it! C언어 입문</span><span class="dl">'</span><span class="p">},</span>
    <span class="p">{</span><span class="na">id</span> <span class="p">:</span> <span class="mi">3</span><span class="p">,</span> <span class="na">language_id</span> <span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="na">name</span> <span class="p">:</span> <span class="dl">'</span><span class="s1">열혈 C프로그래밍</span><span class="dl">'</span><span class="p">},</span>
    <span class="p">{</span><span class="na">id</span> <span class="p">:</span> <span class="mi">4</span><span class="p">,</span> <span class="na">language_id</span> <span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="na">name</span> <span class="p">:</span> <span class="dl">'</span><span class="s1">열혈 C++프로그래밍</span><span class="dl">'</span><span class="p">},</span>
    <span class="p">{</span><span class="na">id</span> <span class="p">:</span> <span class="mi">5</span><span class="p">,</span> <span class="na">language_id</span> <span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="na">name</span> <span class="p">:</span> <span class="dl">'</span><span class="s1">Effective Mordern C++</span><span class="dl">'</span><span class="p">},</span>
    <span class="p">{</span><span class="na">id</span> <span class="p">:</span> <span class="mi">6</span><span class="p">,</span> <span class="na">language_id</span> <span class="p">:</span> <span class="mi">3</span><span class="p">,</span> <span class="na">name</span> <span class="p">:</span> <span class="dl">'</span><span class="s1">C# 교과서</span><span class="dl">'</span><span class="p">},</span>
    <span class="p">{</span><span class="na">id</span> <span class="p">:</span> <span class="mi">7</span><span class="p">,</span> <span class="na">language_id</span> <span class="p">:</span> <span class="mi">3</span><span class="p">,</span> <span class="na">name</span> <span class="p">:</span> <span class="dl">'</span><span class="s1">유지보수 가능한 코딩의 기술 C#편</span><span class="dl">'</span><span class="p">},</span>
    <span class="p">{</span><span class="na">id</span> <span class="p">:</span> <span class="mi">8</span><span class="p">,</span> <span class="na">language_id</span> <span class="p">:</span> <span class="mi">4</span><span class="p">,</span> <span class="na">name</span> <span class="p">:</span> <span class="dl">'</span><span class="s1">JAVA의 정석</span><span class="dl">'</span><span class="p">},</span>
    <span class="p">{</span><span class="na">id</span> <span class="p">:</span> <span class="mi">9</span><span class="p">,</span> <span class="na">language_id</span> <span class="p">:</span> <span class="mi">4</span><span class="p">,</span> <span class="na">name</span> <span class="p">:</span> <span class="dl">'</span><span class="s1">이펙티브 자바</span><span class="dl">'</span><span class="p">},</span>
    <span class="p">{</span><span class="na">id</span> <span class="p">:</span> <span class="mi">10</span><span class="p">,</span> <span class="na">language_id</span> <span class="p">:</span> <span class="mi">5</span><span class="p">,</span> <span class="na">name</span> <span class="p">:</span> <span class="dl">'</span><span class="s1">이것이 안드로이드다 with 코틀린</span><span class="dl">'</span><span class="p">},</span>
    <span class="p">{</span><span class="na">id</span> <span class="p">:</span> <span class="mi">11</span><span class="p">,</span> <span class="na">language_id</span> <span class="p">:</span> <span class="mi">5</span><span class="p">,</span> <span class="na">name</span> <span class="p">:</span> <span class="dl">'</span><span class="s1">Do it! 깡샘의 안드로이드 앱 프로그래밍 with 코틀린</span><span class="dl">'</span><span class="p">},</span>
    <span class="p">{</span><span class="na">id</span> <span class="p">:</span> <span class="mi">12</span><span class="p">,</span> <span class="na">language_id</span> <span class="p">:</span> <span class="mi">6</span><span class="p">,</span> <span class="na">name</span> <span class="p">:</span> <span class="dl">'</span><span class="s1">실전에서 써먹는 JavaScript</span><span class="dl">'</span><span class="p">},</span>
    <span class="p">{</span><span class="na">id</span> <span class="p">:</span> <span class="mi">13</span><span class="p">,</span> <span class="na">language_id</span> <span class="p">:</span> <span class="mi">6</span><span class="p">,</span> <span class="na">name</span> <span class="p">:</span> <span class="dl">'</span><span class="s1">읽기 좋은 자바스크립트 코딩기법</span><span class="dl">'</span><span class="p">},</span>
    <span class="p">{</span><span class="na">id</span> <span class="p">:</span> <span class="mi">14</span><span class="p">,</span> <span class="na">language_id</span> <span class="p">:</span> <span class="mi">7</span><span class="p">,</span> <span class="na">name</span> <span class="p">:</span> <span class="dl">'</span><span class="s1">데이터 분석을 위한 파이썬</span><span class="dl">'</span><span class="p">},</span>
    <span class="p">{</span><span class="na">id</span> <span class="p">:</span> <span class="mi">15</span><span class="p">,</span> <span class="na">language_id</span> <span class="p">:</span> <span class="mi">7</span><span class="p">,</span> <span class="na">name</span> <span class="p">:</span> <span class="dl">'</span><span class="s1">점프 투 파이썬</span><span class="dl">'</span><span class="p">},</span>
    <span class="p">{</span><span class="na">id</span> <span class="p">:</span> <span class="mi">16</span><span class="p">,</span> <span class="na">language_id</span> <span class="p">:</span> <span class="mi">8</span><span class="p">,</span> <span class="na">name</span> <span class="p">:</span> <span class="dl">'</span><span class="s1">넘버투 PHP</span><span class="dl">'</span><span class="p">},</span>
    <span class="p">{</span><span class="na">id</span> <span class="p">:</span> <span class="mi">17</span><span class="p">,</span> <span class="na">language_id</span> <span class="p">:</span> <span class="mi">11</span><span class="p">,</span> <span class="na">name</span> <span class="p">:</span> <span class="dl">'</span><span class="s1">Swift 프로그래밍</span><span class="dl">'</span><span class="p">}];</span>    


<span class="c1">// ==============역대 대통령 리스트===================</span>
<span class="c1">// 역대 대통령 전체 리스트를 리턴</span>
<span class="nx">app</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">'</span><span class="s1">/presidents</span><span class="dl">'</span><span class="p">,</span> <span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>    
    <span class="nx">res</span><span class="p">.</span><span class="nx">status</span><span class="p">(</span><span class="mi">200</span><span class="p">).</span><span class="nx">json</span><span class="p">({</span> <span class="na">data_list</span> <span class="p">:</span> <span class="nx">presidents</span><span class="p">});</span>
<span class="p">});</span>
<span class="c1">// 특정 대통령의 정보를 리턴</span>
<span class="nx">app</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">'</span><span class="s1">/presidents/:id</span><span class="dl">'</span><span class="p">,</span> <span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">foundPresident</span> <span class="o">=</span> <span class="nx">presidents</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="nx">x</span><span class="o">=&gt;</span><span class="nx">x</span><span class="p">.</span><span class="nx">id</span> <span class="o">==</span> <span class="nx">req</span><span class="p">.</span><span class="nx">params</span><span class="p">.</span><span class="nx">id</span><span class="p">);</span>
    <span class="k">if</span><span class="p">(</span><span class="nx">foundPresident</span><span class="p">){</span>
        <span class="nx">res</span><span class="p">.</span><span class="nx">status</span><span class="p">(</span><span class="mi">200</span><span class="p">).</span><span class="nx">json</span><span class="p">({</span> <span class="na">message</span> <span class="p">:</span> <span class="dl">'</span><span class="s1">success</span><span class="dl">'</span><span class="p">,</span> <span class="na">data</span> <span class="p">:</span> <span class="nx">foundPresident</span><span class="p">});</span>
    <span class="p">}</span><span class="k">else</span><span class="p">{</span>
        <span class="nx">res</span><span class="p">.</span><span class="nx">status</span><span class="p">(</span><span class="mi">404</span><span class="p">).</span><span class="nx">json</span><span class="p">({</span> <span class="na">message</span> <span class="p">:</span> <span class="dl">'</span><span class="s1">president not found</span><span class="dl">'</span><span class="p">});</span>
    <span class="p">}</span>
<span class="p">});</span>
<span class="c1">// 대통령 추가</span>
<span class="nx">app</span><span class="p">.</span><span class="nx">post</span><span class="p">(</span><span class="dl">'</span><span class="s1">/presidents</span><span class="dl">'</span><span class="p">,</span> <span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="k">if</span><span class="p">(</span><span class="nx">req</span><span class="p">.</span><span class="nx">body</span> <span class="o">&amp;&amp;</span> <span class="nx">req</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">name</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">const</span> <span class="nx">newPresident</span> <span class="o">=</span> <span class="p">{</span> <span class="na">id</span> <span class="p">:</span> <span class="nx">presidents</span><span class="p">.</span><span class="nx">length</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="na">name</span> <span class="p">:</span> <span class="nx">req</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">name</span> <span class="p">};</span>
        <span class="nx">presidents</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">newPresident</span><span class="p">);</span>
        <span class="nx">res</span><span class="p">.</span><span class="nx">status</span><span class="p">(</span><span class="mi">200</span><span class="p">).</span><span class="nx">json</span><span class="p">({</span> <span class="na">message</span> <span class="p">:</span> <span class="dl">'</span><span class="s1">success</span><span class="dl">'</span><span class="p">,</span> <span class="na">data</span> <span class="p">:</span> <span class="nx">newPresident</span><span class="p">});</span>
    <span class="p">}</span> <span class="k">else</span> <span class="nx">res</span><span class="p">.</span><span class="nx">status</span><span class="p">(</span><span class="mi">400</span><span class="p">).</span><span class="nx">json</span><span class="p">({</span> <span class="na">message</span> <span class="p">:</span> <span class="dl">'</span><span class="s1">name(body) is required</span><span class="dl">'</span><span class="p">});</span>
<span class="p">});</span>
<span class="c1">// 대통령 수정</span>
<span class="nx">app</span><span class="p">.</span><span class="nx">put</span><span class="p">(</span><span class="dl">'</span><span class="s1">/presidents</span><span class="dl">'</span><span class="p">,</span> <span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="k">if</span><span class="p">(</span><span class="nx">req</span><span class="p">.</span><span class="nx">body</span> <span class="o">&amp;&amp;</span> <span class="nx">req</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">id</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">const</span> <span class="nx">foundPresident</span> <span class="o">=</span> <span class="nx">presidents</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="nx">x</span><span class="o">=&gt;</span><span class="nb">Number</span><span class="p">(</span><span class="nx">x</span><span class="p">.</span><span class="nx">id</span><span class="p">)</span><span class="o">==</span> <span class="nb">Number</span><span class="p">(</span><span class="nx">req</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">id</span><span class="p">));</span>
        <span class="k">if</span><span class="p">(</span><span class="nx">foundPresident</span><span class="p">){</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">req</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">name</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">foundPresident</span><span class="p">.</span><span class="nx">name</span> <span class="o">=</span> <span class="nx">req</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">name</span><span class="p">;</span>          
                <span class="nx">res</span><span class="p">.</span><span class="nx">status</span><span class="p">(</span><span class="mi">200</span><span class="p">).</span><span class="nx">json</span><span class="p">({</span> <span class="na">message</span> <span class="p">:</span> <span class="dl">'</span><span class="s1">success</span><span class="dl">'</span><span class="p">,</span> <span class="na">data</span> <span class="p">:</span> <span class="nx">foundPresident</span><span class="p">});</span>      
            <span class="p">}</span><span class="k">else</span> <span class="nx">res</span><span class="p">.</span><span class="nx">status</span><span class="p">(</span><span class="mi">400</span><span class="p">).</span><span class="nx">json</span><span class="p">({</span> <span class="na">message</span> <span class="p">:</span> <span class="dl">'</span><span class="s1">name(body) is required</span><span class="dl">'</span><span class="p">});</span>
        <span class="p">}</span><span class="k">else</span> <span class="nx">res</span><span class="p">.</span><span class="nx">status</span><span class="p">(</span><span class="mi">404</span><span class="p">).</span><span class="nx">json</span><span class="p">({</span> <span class="na">message</span> <span class="p">:</span> <span class="dl">'</span><span class="s1">president not found</span><span class="dl">'</span><span class="p">});</span>
    <span class="p">}</span> <span class="k">else</span> <span class="nx">res</span><span class="p">.</span><span class="nx">status</span><span class="p">(</span><span class="mi">400</span><span class="p">).</span><span class="nx">json</span><span class="p">({</span> <span class="na">message</span> <span class="p">:</span> <span class="dl">'</span><span class="s1">id(body) is required</span><span class="dl">'</span><span class="p">})</span>
<span class="p">});</span>
<span class="c1">// 전체 대통령 삭제 </span>
<span class="nx">app</span><span class="p">.</span><span class="k">delete</span><span class="p">(</span><span class="dl">'</span><span class="s1">/presidents</span><span class="dl">'</span><span class="p">,</span> <span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">presidents</span> <span class="o">=</span> <span class="p">[];</span>
    <span class="nx">res</span><span class="p">.</span><span class="nx">status</span><span class="p">(</span><span class="mi">200</span><span class="p">).</span><span class="nx">json</span><span class="p">({</span><span class="na">message</span> <span class="p">:</span> <span class="dl">'</span><span class="s1">success</span><span class="dl">'</span><span class="p">});</span>
<span class="p">});</span>
<span class="c1">// 특정 대통령 삭제</span>
<span class="nx">app</span><span class="p">.</span><span class="k">delete</span><span class="p">(</span><span class="dl">'</span><span class="s1">/presidents/:id</span><span class="dl">'</span><span class="p">,</span> <span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="k">if</span><span class="p">(</span><span class="nx">req</span><span class="p">.</span><span class="nx">params</span><span class="p">.</span><span class="nx">id</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">const</span> <span class="nx">foundIndex</span> <span class="o">=</span> <span class="nx">presidents</span><span class="p">.</span><span class="nx">findIndex</span><span class="p">(</span><span class="nx">x</span><span class="o">=&gt;</span><span class="nb">Number</span><span class="p">(</span><span class="nx">x</span><span class="p">.</span><span class="nx">id</span><span class="p">)</span> <span class="o">==</span> <span class="nb">Number</span><span class="p">(</span><span class="nx">req</span><span class="p">.</span><span class="nx">params</span><span class="p">.</span><span class="nx">id</span><span class="p">));</span>
        <span class="k">if</span><span class="p">(</span><span class="nx">foundIndex</span> <span class="o">!=</span> <span class="o">-</span><span class="mi">1</span><span class="p">){</span>
            <span class="nx">presidents</span><span class="p">.</span><span class="nx">splice</span><span class="p">(</span><span class="nx">foundIndex</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
            <span class="nx">res</span><span class="p">.</span><span class="nx">status</span><span class="p">(</span><span class="mi">200</span><span class="p">).</span><span class="nx">json</span><span class="p">({</span> <span class="na">message</span> <span class="p">:</span> <span class="dl">'</span><span class="s1">success</span><span class="dl">'</span><span class="p">});</span>
        <span class="p">}</span><span class="k">else</span> <span class="nx">res</span><span class="p">.</span><span class="nx">status</span><span class="p">(</span><span class="mi">404</span><span class="p">).</span><span class="nx">json</span><span class="p">({</span> <span class="na">message</span> <span class="p">:</span> <span class="dl">'</span><span class="s1">president not found</span><span class="dl">'</span><span class="p">});</span>
    <span class="p">}</span> <span class="k">else</span> <span class="nx">res</span><span class="p">.</span><span class="nx">status</span><span class="p">(</span><span class="mi">400</span><span class="p">).</span><span class="nx">json</span><span class="p">({</span> <span class="na">message</span> <span class="p">:</span> <span class="dl">'</span><span class="s1">:id(params) is required</span><span class="dl">'</span><span class="p">})</span>
<span class="p">});</span>

<span class="c1">// ==============프로그래밍언어 리스트===================</span>
<span class="c1">// 프로그래밍언어 전체 리스트를 리턴</span>
<span class="nx">app</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">'</span><span class="s1">/languages</span><span class="dl">'</span><span class="p">,</span> <span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>    
    <span class="nx">res</span><span class="p">.</span><span class="nx">status</span><span class="p">(</span><span class="mi">200</span><span class="p">).</span><span class="nx">json</span><span class="p">({</span> <span class="na">data_list</span> <span class="p">:</span> <span class="nx">languages</span><span class="p">});</span>
<span class="p">});</span>
<span class="c1">// 특정 프로그래밍언어의 정보를 리턴</span>
<span class="nx">app</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">'</span><span class="s1">/languages/:id</span><span class="dl">'</span><span class="p">,</span> <span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">foundLanguage</span> <span class="o">=</span> <span class="nx">languages</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="nx">x</span><span class="o">=&gt;</span><span class="nx">x</span><span class="p">.</span><span class="nx">id</span> <span class="o">==</span> <span class="nx">req</span><span class="p">.</span><span class="nx">params</span><span class="p">.</span><span class="nx">id</span><span class="p">);</span>
    <span class="k">if</span><span class="p">(</span><span class="nx">foundLanguage</span><span class="p">){</span>
        <span class="nx">res</span><span class="p">.</span><span class="nx">status</span><span class="p">(</span><span class="mi">200</span><span class="p">).</span><span class="nx">json</span><span class="p">({</span> <span class="na">message</span> <span class="p">:</span> <span class="dl">'</span><span class="s1">success</span><span class="dl">'</span><span class="p">,</span> <span class="na">data</span> <span class="p">:</span> <span class="nx">foundLanguage</span><span class="p">});</span>
    <span class="p">}</span><span class="k">else</span><span class="p">{</span>
        <span class="nx">res</span><span class="p">.</span><span class="nx">status</span><span class="p">(</span><span class="mi">404</span><span class="p">).</span><span class="nx">json</span><span class="p">({</span> <span class="na">message</span> <span class="p">:</span> <span class="dl">'</span><span class="s1">language not found</span><span class="dl">'</span><span class="p">});</span>
    <span class="p">}</span>
<span class="p">});</span>
<span class="c1">// 프로그래밍언어 추가</span>
<span class="nx">app</span><span class="p">.</span><span class="nx">post</span><span class="p">(</span><span class="dl">'</span><span class="s1">/languages</span><span class="dl">'</span><span class="p">,</span> <span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="k">if</span><span class="p">(</span><span class="nx">req</span><span class="p">.</span><span class="nx">body</span> <span class="o">&amp;&amp;</span> <span class="nx">req</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">name</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">const</span> <span class="nx">newLanguage</span> <span class="o">=</span> <span class="p">{</span> <span class="na">id</span> <span class="p">:</span> <span class="nx">languages</span><span class="p">.</span><span class="nx">length</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="na">name</span> <span class="p">:</span> <span class="nx">req</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">name</span> <span class="p">};</span>
        <span class="nx">languages</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">newLanguage</span><span class="p">);</span>
        <span class="nx">res</span><span class="p">.</span><span class="nx">status</span><span class="p">(</span><span class="mi">200</span><span class="p">).</span><span class="nx">json</span><span class="p">({</span> <span class="na">message</span> <span class="p">:</span> <span class="dl">'</span><span class="s1">success</span><span class="dl">'</span><span class="p">,</span> <span class="na">data</span> <span class="p">:</span> <span class="nx">newLanguage</span><span class="p">});</span>
    <span class="p">}</span> <span class="k">else</span> <span class="nx">res</span><span class="p">.</span><span class="nx">status</span><span class="p">(</span><span class="mi">400</span><span class="p">).</span><span class="nx">json</span><span class="p">({</span> <span class="na">message</span> <span class="p">:</span> <span class="dl">'</span><span class="s1">name(body) is required</span><span class="dl">'</span><span class="p">});</span>
<span class="p">});</span>
<span class="c1">// 프로그래밍언어 수정</span>
<span class="nx">app</span><span class="p">.</span><span class="nx">put</span><span class="p">(</span><span class="dl">'</span><span class="s1">/languages</span><span class="dl">'</span><span class="p">,</span> <span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="k">if</span><span class="p">(</span><span class="nx">req</span><span class="p">.</span><span class="nx">body</span> <span class="o">&amp;&amp;</span> <span class="nx">req</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">id</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">const</span> <span class="nx">foundLanguage</span> <span class="o">=</span> <span class="nx">languages</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="nx">x</span><span class="o">=&gt;</span><span class="nb">Number</span><span class="p">(</span><span class="nx">x</span><span class="p">.</span><span class="nx">id</span><span class="p">)</span><span class="o">==</span> <span class="nb">Number</span><span class="p">(</span><span class="nx">req</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">id</span><span class="p">));</span>
        <span class="k">if</span><span class="p">(</span><span class="nx">foundLanguage</span><span class="p">){</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">req</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">name</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">foundLanguage</span><span class="p">.</span><span class="nx">name</span> <span class="o">=</span> <span class="nx">req</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">name</span><span class="p">;</span>          
                <span class="nx">res</span><span class="p">.</span><span class="nx">status</span><span class="p">(</span><span class="mi">200</span><span class="p">).</span><span class="nx">json</span><span class="p">({</span> <span class="na">message</span> <span class="p">:</span> <span class="dl">'</span><span class="s1">success</span><span class="dl">'</span><span class="p">,</span> <span class="na">data</span> <span class="p">:</span> <span class="nx">foundLanguage</span><span class="p">});</span>      
            <span class="p">}</span><span class="k">else</span> <span class="nx">res</span><span class="p">.</span><span class="nx">status</span><span class="p">(</span><span class="mi">400</span><span class="p">).</span><span class="nx">json</span><span class="p">({</span> <span class="na">message</span> <span class="p">:</span> <span class="dl">'</span><span class="s1">name(body) is required</span><span class="dl">'</span><span class="p">});</span>
        <span class="p">}</span><span class="k">else</span> <span class="nx">res</span><span class="p">.</span><span class="nx">status</span><span class="p">(</span><span class="mi">404</span><span class="p">).</span><span class="nx">json</span><span class="p">({</span> <span class="na">message</span> <span class="p">:</span> <span class="dl">'</span><span class="s1">language not found</span><span class="dl">'</span><span class="p">});</span>
    <span class="p">}</span> <span class="k">else</span> <span class="nx">res</span><span class="p">.</span><span class="nx">status</span><span class="p">(</span><span class="mi">400</span><span class="p">).</span><span class="nx">json</span><span class="p">({</span> <span class="na">message</span> <span class="p">:</span> <span class="dl">'</span><span class="s1">id(body) is required</span><span class="dl">'</span><span class="p">})</span>
<span class="p">});</span>
<span class="c1">// 전체 프로그래밍언어 삭제 </span>
<span class="nx">app</span><span class="p">.</span><span class="k">delete</span><span class="p">(</span><span class="dl">'</span><span class="s1">/languages</span><span class="dl">'</span><span class="p">,</span> <span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">languages</span> <span class="o">=</span> <span class="p">[];</span>
    <span class="nx">res</span><span class="p">.</span><span class="nx">status</span><span class="p">(</span><span class="mi">200</span><span class="p">).</span><span class="nx">json</span><span class="p">({</span><span class="na">message</span> <span class="p">:</span> <span class="dl">'</span><span class="s1">success</span><span class="dl">'</span><span class="p">});</span>
<span class="p">});</span>
<span class="c1">// 특정 프로그래밍언어 삭제</span>
<span class="nx">app</span><span class="p">.</span><span class="k">delete</span><span class="p">(</span><span class="dl">'</span><span class="s1">/languages/:id</span><span class="dl">'</span><span class="p">,</span> <span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="k">if</span><span class="p">(</span><span class="nx">req</span><span class="p">.</span><span class="nx">params</span><span class="p">.</span><span class="nx">id</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">const</span> <span class="nx">foundIndex</span> <span class="o">=</span> <span class="nx">languages</span><span class="p">.</span><span class="nx">findIndex</span><span class="p">(</span><span class="nx">x</span><span class="o">=&gt;</span><span class="nb">Number</span><span class="p">(</span><span class="nx">x</span><span class="p">.</span><span class="nx">id</span><span class="p">)</span> <span class="o">==</span> <span class="nb">Number</span><span class="p">(</span><span class="nx">req</span><span class="p">.</span><span class="nx">params</span><span class="p">.</span><span class="nx">id</span><span class="p">));</span>
        <span class="k">if</span><span class="p">(</span><span class="nx">foundIndex</span> <span class="o">!=</span> <span class="o">-</span><span class="mi">1</span><span class="p">){</span>
            <span class="nx">languages</span><span class="p">.</span><span class="nx">splice</span><span class="p">(</span><span class="nx">foundIndex</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
            <span class="nx">res</span><span class="p">.</span><span class="nx">status</span><span class="p">(</span><span class="mi">200</span><span class="p">).</span><span class="nx">json</span><span class="p">({</span> <span class="na">message</span> <span class="p">:</span> <span class="dl">'</span><span class="s1">success</span><span class="dl">'</span><span class="p">});</span>
        <span class="p">}</span><span class="k">else</span> <span class="nx">res</span><span class="p">.</span><span class="nx">status</span><span class="p">(</span><span class="mi">404</span><span class="p">).</span><span class="nx">json</span><span class="p">({</span> <span class="na">message</span> <span class="p">:</span> <span class="dl">'</span><span class="s1">language not found</span><span class="dl">'</span><span class="p">});</span>
    <span class="p">}</span> <span class="k">else</span> <span class="nx">res</span><span class="p">.</span><span class="nx">status</span><span class="p">(</span><span class="mi">400</span><span class="p">).</span><span class="nx">json</span><span class="p">({</span> <span class="na">message</span> <span class="p">:</span> <span class="dl">'</span><span class="s1">:id(params) is required</span><span class="dl">'</span><span class="p">})</span>
<span class="p">});</span>


<span class="c1">// ==============프로그래밍언어 책 리스트===================</span>
<span class="c1">// 특정 언어의 책 리스트를 리턴</span>
<span class="nx">app</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">'</span><span class="s1">/languages/:language_id/books</span><span class="dl">'</span><span class="p">,</span> <span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>    
    <span class="kd">const</span> <span class="nx">foundLanguage</span> <span class="o">=</span> <span class="nx">languages</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="nx">x</span><span class="o">=&gt;</span><span class="nx">x</span><span class="p">.</span><span class="nx">id</span> <span class="o">==</span> <span class="nx">req</span><span class="p">.</span><span class="nx">params</span><span class="p">.</span><span class="nx">language_id</span><span class="p">);</span>
    <span class="k">if</span><span class="p">(</span><span class="nx">foundLanguage</span><span class="p">){</span>
        <span class="kd">const</span> <span class="nx">filteredBooks</span> <span class="o">=</span> <span class="nx">books</span><span class="p">.</span><span class="nx">filter</span><span class="p">(</span><span class="nx">x</span><span class="o">=&gt;</span> <span class="nx">x</span><span class="p">.</span><span class="nx">language_id</span> <span class="o">==</span> <span class="nx">req</span><span class="p">.</span><span class="nx">params</span><span class="p">.</span><span class="nx">language_id</span><span class="p">);</span>    
        <span class="nx">res</span><span class="p">.</span><span class="nx">status</span><span class="p">(</span><span class="mi">200</span><span class="p">).</span><span class="nx">json</span><span class="p">({</span> <span class="na">message</span> <span class="p">:</span> <span class="dl">'</span><span class="s1">success</span><span class="dl">'</span><span class="p">,</span> <span class="na">data_list</span> <span class="p">:</span> <span class="nx">filteredBooks</span><span class="p">});</span> 
    <span class="p">}</span><span class="k">else</span> <span class="nx">res</span><span class="p">.</span><span class="nx">status</span><span class="p">(</span><span class="mi">400</span><span class="p">).</span><span class="nx">json</span><span class="p">({</span> <span class="na">message</span> <span class="p">:</span> <span class="dl">'</span><span class="s1">language not found</span><span class="dl">'</span><span class="p">});</span> 
<span class="p">});</span>

<span class="c1">// 특정 언어의 책 추가</span>
<span class="nx">app</span><span class="p">.</span><span class="nx">post</span><span class="p">(</span><span class="dl">'</span><span class="s1">/languages/:language_id/books</span><span class="dl">'</span><span class="p">,</span> <span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">foundLanguage</span> <span class="o">=</span> <span class="nx">languages</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="nx">x</span><span class="o">=&gt;</span><span class="nx">x</span><span class="p">.</span><span class="nx">id</span> <span class="o">==</span> <span class="nx">req</span><span class="p">.</span><span class="nx">params</span><span class="p">.</span><span class="nx">language_id</span><span class="p">);</span>
    <span class="k">if</span><span class="p">(</span><span class="nx">foundLanguage</span><span class="p">){</span>
        <span class="k">if</span><span class="p">(</span><span class="nx">req</span><span class="p">.</span><span class="nx">body</span> <span class="o">&amp;&amp;</span> <span class="nx">req</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">name</span><span class="p">){</span>
            <span class="kd">const</span> <span class="nx">newBook</span> <span class="o">=</span> <span class="p">{</span><span class="na">id</span><span class="p">:</span> <span class="nx">books</span><span class="p">.</span><span class="nx">length</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="na">language_id</span> <span class="p">:</span> <span class="nb">Number</span><span class="p">(</span><span class="nx">req</span><span class="p">.</span><span class="nx">params</span><span class="p">.</span><span class="nx">language_id</span><span class="p">),</span> <span class="na">name</span> <span class="p">:</span> <span class="nx">req</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">name</span><span class="p">};</span>
            <span class="nx">books</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">newBook</span><span class="p">);</span>
            <span class="nx">res</span><span class="p">.</span><span class="nx">status</span><span class="p">(</span><span class="mi">200</span><span class="p">).</span><span class="nx">json</span><span class="p">({</span> <span class="na">message</span> <span class="p">:</span> <span class="dl">'</span><span class="s1">success</span><span class="dl">'</span><span class="p">,</span> <span class="na">data</span> <span class="p">:</span> <span class="nx">newBook</span><span class="p">});</span> 
        <span class="p">}</span><span class="k">else</span> <span class="nx">res</span><span class="p">.</span><span class="nx">status</span><span class="p">(</span><span class="mi">400</span><span class="p">).</span><span class="nx">json</span><span class="p">({</span> <span class="na">message</span> <span class="p">:</span> <span class="dl">'</span><span class="s1">name(body) is required</span><span class="dl">'</span><span class="p">});</span>         
    <span class="p">}</span><span class="k">else</span> <span class="nx">res</span><span class="p">.</span><span class="nx">status</span><span class="p">(</span><span class="mi">404</span><span class="p">).</span><span class="nx">json</span><span class="p">({</span> <span class="na">message</span> <span class="p">:</span> <span class="dl">'</span><span class="s1">language not found</span><span class="dl">'</span><span class="p">});</span> 
<span class="p">});</span>
<span class="c1">// 특정 언어의 책 수정</span>
<span class="nx">app</span><span class="p">.</span><span class="nx">put</span><span class="p">(</span><span class="dl">'</span><span class="s1">/languages/:language_id/books</span><span class="dl">'</span><span class="p">,</span> <span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">foundLanguage</span> <span class="o">=</span> <span class="nx">languages</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="nx">x</span><span class="o">=&gt;</span><span class="nx">x</span><span class="p">.</span><span class="nx">id</span> <span class="o">==</span> <span class="nx">req</span><span class="p">.</span><span class="nx">params</span><span class="p">.</span><span class="nx">language_id</span><span class="p">);</span>
    <span class="k">if</span><span class="p">(</span><span class="nx">foundLanguage</span><span class="p">){</span>
        <span class="k">if</span><span class="p">(</span><span class="nx">req</span><span class="p">.</span><span class="nx">body</span> <span class="o">&amp;&amp;</span> <span class="nx">req</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">id</span> <span class="o">&amp;&amp;</span> <span class="nx">req</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">name</span><span class="p">){</span>
            <span class="kd">const</span> <span class="nx">filteredBooks</span> <span class="o">=</span> <span class="nx">books</span><span class="p">.</span><span class="nx">filter</span><span class="p">(</span><span class="nx">x</span><span class="o">=&gt;</span><span class="nx">x</span><span class="p">.</span><span class="nx">language_id</span> <span class="o">==</span> <span class="nx">req</span><span class="p">.</span><span class="nx">params</span><span class="p">.</span><span class="nx">language_id</span><span class="p">);</span>
            <span class="kd">const</span> <span class="nx">foundBook</span> <span class="o">=</span> <span class="nx">filteredBooks</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="nx">x</span><span class="o">=&gt;</span><span class="nx">x</span><span class="p">.</span><span class="nx">id</span> <span class="o">==</span> <span class="nx">req</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">id</span><span class="p">);</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">foundBook</span><span class="p">){</span>
                <span class="nx">foundBook</span><span class="p">.</span><span class="nx">name</span> <span class="o">=</span> <span class="nx">req</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">name</span><span class="p">;</span>
                <span class="nx">res</span><span class="p">.</span><span class="nx">status</span><span class="p">(</span><span class="mi">200</span><span class="p">).</span><span class="nx">json</span><span class="p">({</span> <span class="na">message</span> <span class="p">:</span> <span class="dl">'</span><span class="s1">success</span><span class="dl">'</span><span class="p">,</span> <span class="na">data</span> <span class="p">:</span> <span class="nx">foundBook</span><span class="p">});</span>
            <span class="p">}</span><span class="k">else</span> <span class="nx">res</span><span class="p">.</span><span class="nx">status</span><span class="p">(</span><span class="mi">404</span><span class="p">).</span><span class="nx">json</span><span class="p">({</span> <span class="na">message</span> <span class="p">:</span> <span class="dl">'</span><span class="s1">book not found</span><span class="dl">'</span><span class="p">});</span>
        <span class="p">}</span><span class="k">else</span> <span class="nx">res</span><span class="p">.</span><span class="nx">status</span><span class="p">(</span><span class="mi">400</span><span class="p">).</span><span class="nx">json</span><span class="p">({</span> <span class="na">message</span> <span class="p">:</span> <span class="dl">'</span><span class="s1">id, name(body) is required</span><span class="dl">'</span><span class="p">});</span>
    <span class="p">}</span><span class="k">else</span> <span class="nx">res</span><span class="p">.</span><span class="nx">status</span><span class="p">(</span><span class="mi">404</span><span class="p">).</span><span class="nx">json</span><span class="p">({</span> <span class="na">message</span> <span class="p">:</span> <span class="dl">'</span><span class="s1">language not found</span><span class="dl">'</span><span class="p">});</span> 
<span class="p">});</span>
<span class="c1">// 특정 언어의 책 삭제</span>
<span class="nx">app</span><span class="p">.</span><span class="k">delete</span><span class="p">(</span><span class="dl">'</span><span class="s1">/languages/:language_id/books/:id</span><span class="dl">'</span><span class="p">,</span> <span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">foundLanguage</span> <span class="o">=</span> <span class="nx">languages</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="nx">x</span><span class="o">=&gt;</span><span class="nx">x</span><span class="p">.</span><span class="nx">id</span> <span class="o">==</span> <span class="nx">req</span><span class="p">.</span><span class="nx">params</span><span class="p">.</span><span class="nx">language_id</span><span class="p">);</span>
    <span class="k">if</span><span class="p">(</span><span class="nx">foundLanguage</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">const</span> <span class="nx">foundIndex</span> <span class="o">=</span> <span class="nx">books</span><span class="p">.</span><span class="nx">findIndex</span><span class="p">(</span><span class="nx">x</span><span class="o">=&gt;</span><span class="nx">x</span><span class="p">.</span><span class="nx">id</span> <span class="o">==</span> <span class="nx">req</span><span class="p">.</span><span class="nx">params</span><span class="p">.</span><span class="nx">id</span><span class="p">);</span>         
        <span class="k">if</span><span class="p">(</span><span class="nx">foundIndex</span> <span class="o">!=</span> <span class="o">-</span><span class="mi">1</span><span class="p">){</span>
            <span class="nx">books</span><span class="p">.</span><span class="nx">splice</span><span class="p">(</span><span class="nx">foundIndex</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
            <span class="nx">res</span><span class="p">.</span><span class="nx">status</span><span class="p">(</span><span class="mi">200</span><span class="p">).</span><span class="nx">json</span><span class="p">({</span> <span class="na">message</span> <span class="p">:</span> <span class="dl">'</span><span class="s1">success</span><span class="dl">'</span><span class="p">});</span> 
        <span class="p">}</span><span class="k">else</span> <span class="nx">res</span><span class="p">.</span><span class="nx">status</span><span class="p">(</span><span class="mi">404</span><span class="p">).</span><span class="nx">json</span><span class="p">({</span> <span class="na">message</span> <span class="p">:</span> <span class="dl">'</span><span class="s1">book not found</span><span class="dl">'</span><span class="p">});</span> 
    <span class="p">}</span> <span class="k">else</span> <span class="nx">res</span><span class="p">.</span><span class="nx">status</span><span class="p">(</span><span class="mi">404</span><span class="p">).</span><span class="nx">json</span><span class="p">({</span> <span class="na">message</span> <span class="p">:</span> <span class="dl">'</span><span class="s1">language not found</span><span class="dl">'</span><span class="p">});</span>          
<span class="p">});</span>


<span class="c1">// index</span>
<span class="nx">app</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">'</span><span class="s1">/</span><span class="dl">'</span><span class="p">,</span> <span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">res</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="dl">'</span><span class="s1">Hello Express!!</span><span class="dl">'</span><span class="p">);</span>
<span class="p">});</span>

<span class="c1">// 404 middleware</span>
<span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">((</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">,</span> <span class="nx">next</span><span class="p">)</span><span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">res</span><span class="p">.</span><span class="nx">status</span><span class="p">(</span><span class="mi">404</span><span class="p">).</span><span class="nx">json</span><span class="p">({</span><span class="na">message</span> <span class="p">:</span> <span class="dl">'</span><span class="s1">api not found (no match entry-point)</span><span class="dl">'</span><span class="p">});</span>
<span class="p">})</span>

<span class="nx">app</span><span class="p">.</span><span class="nx">listen</span><span class="p">(</span><span class="nx">app</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">'</span><span class="s1">port</span><span class="dl">'</span><span class="p">),</span> <span class="p">()</span><span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">server is running on </span><span class="dl">'</span><span class="p">,</span> <span class="nx">app</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">'</span><span class="s1">port</span><span class="dl">'</span><span class="p">));</span>
<span class="p">});</span>
</pre></td>
</tr></tbody></table></code></div></div>
<p>겨우 세개의 리소스만 존재하는 간단한 api 서버지만 보다시피 코드가 길고 더럽다. (예시를 위해 일부러 극단적으로 구현했음)<br> 게다가 entry-point인 presidents 와 languages 는 중복되어 자주 사용된다.</p>
<p>이런 더러운.. 코드를 이제부터 분리 관리해야하는데. 간단한 Express Router 사용법 부터 알고 들어가자.</p>
<h2 id="문법">문법</h2>
<p><strong>1. route 만들기</strong></p>
<div lang="js" class="language-js highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr>
<td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre></td>
<td class="rouge-code"><pre><span class="c1">// /routes/presidents.js</span>
<span class="kd">const</span> <span class="nx">express</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">express</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">router</span> <span class="o">=</span> <span class="nx">express</span><span class="p">.</span><span class="nx">Router</span><span class="p">();</span>
<span class="nx">router</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">'</span><span class="s1">/</span><span class="dl">'</span><span class="p">,</span> <span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span><span class="o">=&gt;</span><span class="p">{</span><span class="nx">res</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="dl">'</span><span class="s1">GET /presidents 호출!</span><span class="dl">'</span><span class="p">)});</span>
<span class="nx">router</span><span class="p">.</span><span class="nx">post</span><span class="p">(</span><span class="dl">'</span><span class="s1">/</span><span class="dl">'</span><span class="p">,</span> <span class="nx">서비스</span> <span class="nx">로직</span><span class="p">);</span>
<span class="p">...</span>
<span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="nx">router</span><span class="p">;</span>
</pre></td>
</tr></tbody></table></code></div></div>
<p><strong>2. route 장착하기</strong></p>
<div lang="js" class="language-js highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr>
<td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre></td>
<td class="rouge-code"><pre><span class="c1">// /app.js</span>
<span class="kd">const</span> <span class="nx">express</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">express</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">presidentsRouter</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">./routes/presidents</span><span class="dl">'</span><span class="p">);</span>
<span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="dl">'</span><span class="s1">/presidents</span><span class="dl">'</span><span class="p">,</span> <span class="nx">presidentsRouter</span><span class="p">);</span>
</pre></td>
</tr></tbody></table></code></div></div>
<p>express.Router() 명령을 통해 router를 만들고 이를 export해서<br> app.use에 end-point를 지정하고 이를 장착만 하면 끝난다. (아주 심플하다!)</p>
<blockquote><p>여기서 주의할 점은 presidents라우터 내부의 router.METHOD를 정의하는 부분에서 entry-point엔 presidents를 적지 않는 것이다. 중복사용 base url(‘/presidents’)은 router를 장착하는 쪽에서 정의한다. (즉 app.js의 app.use 부분에서)</p></blockquote>
<p>이제 entry-point별로 더러운 app.js 코드를 분리해보자 !</p>
<h2 id="step-1-자원단위로-분리하기">Step 1 자원단위로 분리하기</h2>
<div class="table-wrapper"><table>
<thead><tr><th style="text-align: center"><img data-proofer-ignore data-src="/img/20210905001.png" alt="20210905001"></th></tr></thead>
<tbody><tr><td style="text-align: center"><em>routes폴더로 분리</em></td></tr></tbody>
</table></div>
<p>간단히 위에서 배운 문법으로 url 별로 router를 분리해보자</p>
<h3 id="step1-자원단위로-분리하기-routespresidentsjs">[step1 자원단위로 분리하기] /routes/presidents.js</h3>
<div lang="js" class="language-js highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr>
<td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
</pre></td>
<td class="rouge-code"><pre><span class="kd">const</span> <span class="nx">express</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">express</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">router</span> <span class="o">=</span> <span class="nx">express</span><span class="p">.</span><span class="nx">Router</span><span class="p">();</span>

<span class="kd">let</span> <span class="nx">presidents</span> <span class="o">=</span> <span class="p">[</span> <span class="c1">//DB상에 역대대통령 데이터가 있다고 가정해보자.</span>
    <span class="p">{</span><span class="na">id</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="na">name</span><span class="p">:</span> <span class="dl">'</span><span class="s1">이승만</span><span class="dl">'</span><span class="p">},</span>
    <span class="p">{</span><span class="na">id</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="na">name</span><span class="p">:</span> <span class="dl">'</span><span class="s1">윤보선</span><span class="dl">'</span><span class="p">},</span>
    <span class="p">{</span><span class="na">id</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span> <span class="na">name</span><span class="p">:</span> <span class="dl">'</span><span class="s1">박정희</span><span class="dl">'</span><span class="p">},</span>
    <span class="p">{</span><span class="na">id</span><span class="p">:</span> <span class="mi">4</span><span class="p">,</span> <span class="na">name</span><span class="p">:</span> <span class="dl">'</span><span class="s1">최규하</span><span class="dl">'</span><span class="p">},</span>
    <span class="p">{</span><span class="na">id</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span> <span class="na">name</span><span class="p">:</span> <span class="dl">'</span><span class="s1">전두환</span><span class="dl">'</span><span class="p">},</span>
    <span class="p">{</span><span class="na">id</span><span class="p">:</span> <span class="mi">6</span><span class="p">,</span> <span class="na">name</span><span class="p">:</span> <span class="dl">'</span><span class="s1">노태우</span><span class="dl">'</span><span class="p">},</span>
    <span class="p">{</span><span class="na">id</span><span class="p">:</span> <span class="mi">7</span><span class="p">,</span> <span class="na">name</span><span class="p">:</span> <span class="dl">'</span><span class="s1">노태우</span><span class="dl">'</span><span class="p">},</span>
    <span class="p">{</span><span class="na">id</span><span class="p">:</span> <span class="mi">8</span><span class="p">,</span> <span class="na">name</span><span class="p">:</span> <span class="dl">'</span><span class="s1">김영삼</span><span class="dl">'</span><span class="p">},</span>
    <span class="p">{</span><span class="na">id</span><span class="p">:</span> <span class="mi">9</span><span class="p">,</span> <span class="na">name</span><span class="p">:</span> <span class="dl">'</span><span class="s1">이명박</span><span class="dl">'</span><span class="p">},</span>
    <span class="p">{</span><span class="na">id</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span> <span class="na">name</span><span class="p">:</span> <span class="dl">'</span><span class="s1">박근혜</span><span class="dl">'</span><span class="p">},</span>
    <span class="p">{</span><span class="na">id</span><span class="p">:</span> <span class="mi">11</span><span class="p">,</span> <span class="na">name</span><span class="p">:</span> <span class="dl">'</span><span class="s1">문재인</span><span class="dl">'</span><span class="p">}];</span>

<span class="c1">// ==============역대 대통령 리스트===================</span>
<span class="c1">// 역대 대통령 전체 리스트를 리턴</span>
<span class="nx">router</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">'</span><span class="s1">/</span><span class="dl">'</span><span class="p">,</span> <span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>    
    <span class="nx">res</span><span class="p">.</span><span class="nx">status</span><span class="p">(</span><span class="mi">200</span><span class="p">).</span><span class="nx">json</span><span class="p">({</span> <span class="na">data_list</span> <span class="p">:</span> <span class="nx">presidents</span><span class="p">});</span>
<span class="p">});</span>
<span class="c1">// 특정 대통령의 정보를 리턴</span>
<span class="nx">router</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">'</span><span class="s1">/:id</span><span class="dl">'</span><span class="p">,</span> <span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">foundPresident</span> <span class="o">=</span> <span class="nx">presidents</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="nx">x</span><span class="o">=&gt;</span><span class="nx">x</span><span class="p">.</span><span class="nx">id</span> <span class="o">==</span> <span class="nx">req</span><span class="p">.</span><span class="nx">params</span><span class="p">.</span><span class="nx">id</span><span class="p">);</span>
    <span class="k">if</span><span class="p">(</span><span class="nx">foundPresident</span><span class="p">){</span>
        <span class="nx">res</span><span class="p">.</span><span class="nx">status</span><span class="p">(</span><span class="mi">200</span><span class="p">).</span><span class="nx">json</span><span class="p">({</span> <span class="na">message</span> <span class="p">:</span> <span class="dl">'</span><span class="s1">success</span><span class="dl">'</span><span class="p">,</span> <span class="na">data</span> <span class="p">:</span> <span class="nx">foundPresident</span><span class="p">});</span>
    <span class="p">}</span><span class="k">else</span><span class="p">{</span>
        <span class="nx">res</span><span class="p">.</span><span class="nx">status</span><span class="p">(</span><span class="mi">404</span><span class="p">).</span><span class="nx">json</span><span class="p">({</span> <span class="na">message</span> <span class="p">:</span> <span class="dl">'</span><span class="s1">president not found</span><span class="dl">'</span><span class="p">});</span>
    <span class="p">}</span>
<span class="p">});</span>
<span class="c1">// 대통령 추가</span>
<span class="nx">router</span><span class="p">.</span><span class="nx">post</span><span class="p">(</span><span class="dl">'</span><span class="s1">/</span><span class="dl">'</span><span class="p">,</span> <span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="k">if</span><span class="p">(</span><span class="nx">req</span><span class="p">.</span><span class="nx">body</span> <span class="o">&amp;&amp;</span> <span class="nx">req</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">name</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">const</span> <span class="nx">newPresident</span> <span class="o">=</span> <span class="p">{</span> <span class="na">id</span> <span class="p">:</span> <span class="nx">presidents</span><span class="p">.</span><span class="nx">length</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="na">name</span> <span class="p">:</span> <span class="nx">req</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">name</span> <span class="p">};</span>
        <span class="nx">presidents</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">newPresident</span><span class="p">);</span>
        <span class="nx">res</span><span class="p">.</span><span class="nx">status</span><span class="p">(</span><span class="mi">200</span><span class="p">).</span><span class="nx">json</span><span class="p">({</span> <span class="na">message</span> <span class="p">:</span> <span class="dl">'</span><span class="s1">success</span><span class="dl">'</span><span class="p">,</span> <span class="na">data</span> <span class="p">:</span> <span class="nx">newPresident</span><span class="p">});</span>
    <span class="p">}</span> <span class="k">else</span> <span class="nx">res</span><span class="p">.</span><span class="nx">status</span><span class="p">(</span><span class="mi">400</span><span class="p">).</span><span class="nx">json</span><span class="p">({</span> <span class="na">message</span> <span class="p">:</span> <span class="dl">'</span><span class="s1">name(body) is required</span><span class="dl">'</span><span class="p">});</span>
<span class="p">});</span>
<span class="c1">// 대통령 수정</span>
<span class="nx">router</span><span class="p">.</span><span class="nx">put</span><span class="p">(</span><span class="dl">'</span><span class="s1">/</span><span class="dl">'</span><span class="p">,</span> <span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="k">if</span><span class="p">(</span><span class="nx">req</span><span class="p">.</span><span class="nx">body</span> <span class="o">&amp;&amp;</span> <span class="nx">req</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">id</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">const</span> <span class="nx">foundPresident</span> <span class="o">=</span> <span class="nx">presidents</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="nx">x</span><span class="o">=&gt;</span><span class="nb">Number</span><span class="p">(</span><span class="nx">x</span><span class="p">.</span><span class="nx">id</span><span class="p">)</span><span class="o">==</span> <span class="nb">Number</span><span class="p">(</span><span class="nx">req</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">id</span><span class="p">));</span>
        <span class="k">if</span><span class="p">(</span><span class="nx">foundPresident</span><span class="p">){</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">req</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">name</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">foundPresident</span><span class="p">.</span><span class="nx">name</span> <span class="o">=</span> <span class="nx">req</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">name</span><span class="p">;</span>          
                <span class="nx">res</span><span class="p">.</span><span class="nx">status</span><span class="p">(</span><span class="mi">200</span><span class="p">).</span><span class="nx">json</span><span class="p">({</span> <span class="na">message</span> <span class="p">:</span> <span class="dl">'</span><span class="s1">success</span><span class="dl">'</span><span class="p">,</span> <span class="na">data</span> <span class="p">:</span> <span class="nx">foundPresident</span><span class="p">});</span>      
            <span class="p">}</span><span class="k">else</span> <span class="nx">res</span><span class="p">.</span><span class="nx">status</span><span class="p">(</span><span class="mi">400</span><span class="p">).</span><span class="nx">json</span><span class="p">({</span> <span class="na">message</span> <span class="p">:</span> <span class="dl">'</span><span class="s1">name(body) is required</span><span class="dl">'</span><span class="p">});</span>
        <span class="p">}</span><span class="k">else</span> <span class="nx">res</span><span class="p">.</span><span class="nx">status</span><span class="p">(</span><span class="mi">404</span><span class="p">).</span><span class="nx">json</span><span class="p">({</span> <span class="na">message</span> <span class="p">:</span> <span class="dl">'</span><span class="s1">president not found</span><span class="dl">'</span><span class="p">});</span>
    <span class="p">}</span> <span class="k">else</span> <span class="nx">res</span><span class="p">.</span><span class="nx">status</span><span class="p">(</span><span class="mi">400</span><span class="p">).</span><span class="nx">json</span><span class="p">({</span> <span class="na">message</span> <span class="p">:</span> <span class="dl">'</span><span class="s1">id(body) is required</span><span class="dl">'</span><span class="p">})</span>
<span class="p">});</span>
<span class="c1">// 전체 대통령 삭제 </span>
<span class="nx">router</span><span class="p">.</span><span class="k">delete</span><span class="p">(</span><span class="dl">'</span><span class="s1">/</span><span class="dl">'</span><span class="p">,</span> <span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">presidents</span> <span class="o">=</span> <span class="p">[];</span>
    <span class="nx">res</span><span class="p">.</span><span class="nx">status</span><span class="p">(</span><span class="mi">200</span><span class="p">).</span><span class="nx">json</span><span class="p">({</span><span class="na">message</span> <span class="p">:</span> <span class="dl">'</span><span class="s1">success</span><span class="dl">'</span><span class="p">});</span>
<span class="p">});</span>
<span class="c1">// 특정 대통령 삭제</span>
<span class="nx">router</span><span class="p">.</span><span class="k">delete</span><span class="p">(</span><span class="dl">'</span><span class="s1">/:id</span><span class="dl">'</span><span class="p">,</span> <span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="k">if</span><span class="p">(</span><span class="nx">req</span><span class="p">.</span><span class="nx">params</span><span class="p">.</span><span class="nx">id</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">const</span> <span class="nx">foundIndex</span> <span class="o">=</span> <span class="nx">presidents</span><span class="p">.</span><span class="nx">findIndex</span><span class="p">(</span><span class="nx">x</span><span class="o">=&gt;</span><span class="nb">Number</span><span class="p">(</span><span class="nx">x</span><span class="p">.</span><span class="nx">id</span><span class="p">)</span> <span class="o">==</span> <span class="nb">Number</span><span class="p">(</span><span class="nx">req</span><span class="p">.</span><span class="nx">params</span><span class="p">.</span><span class="nx">id</span><span class="p">));</span>
        <span class="k">if</span><span class="p">(</span><span class="nx">foundIndex</span> <span class="o">!=</span> <span class="o">-</span><span class="mi">1</span><span class="p">){</span>
            <span class="nx">presidents</span><span class="p">.</span><span class="nx">splice</span><span class="p">(</span><span class="nx">foundIndex</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
            <span class="nx">res</span><span class="p">.</span><span class="nx">status</span><span class="p">(</span><span class="mi">200</span><span class="p">).</span><span class="nx">json</span><span class="p">({</span> <span class="na">message</span> <span class="p">:</span> <span class="dl">'</span><span class="s1">success</span><span class="dl">'</span><span class="p">});</span>
        <span class="p">}</span><span class="k">else</span> <span class="nx">res</span><span class="p">.</span><span class="nx">status</span><span class="p">(</span><span class="mi">404</span><span class="p">).</span><span class="nx">json</span><span class="p">({</span> <span class="na">message</span> <span class="p">:</span> <span class="dl">'</span><span class="s1">president not found</span><span class="dl">'</span><span class="p">});</span>
    <span class="p">}</span> <span class="k">else</span> <span class="nx">res</span><span class="p">.</span><span class="nx">status</span><span class="p">(</span><span class="mi">400</span><span class="p">).</span><span class="nx">json</span><span class="p">({</span> <span class="na">message</span> <span class="p">:</span> <span class="dl">'</span><span class="s1">:id(params) is required</span><span class="dl">'</span><span class="p">})</span>
<span class="p">});</span>

<span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="nx">router</span><span class="p">;</span>
</pre></td>
</tr></tbody></table></code></div></div>
<h3 id="step1-자원단위로-분리하기-routeslanguagesjs">[step1 자원단위로 분리하기] /routes/languages.js</h3>
<div lang="js" class="language-js highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr>
<td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
</pre></td>
<td class="rouge-code"><pre><span class="kd">const</span> <span class="nx">express</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">express</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">router</span> <span class="o">=</span> <span class="nx">express</span><span class="p">.</span><span class="nx">Router</span><span class="p">();</span>

<span class="kd">let</span> <span class="nx">languages</span> <span class="o">=</span> <span class="p">[</span> <span class="c1">//프로그래밍 언어들</span>
    <span class="p">{</span><span class="na">id</span> <span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="na">name</span> <span class="p">:</span> <span class="dl">'</span><span class="s1">C</span><span class="dl">'</span><span class="p">},</span>
    <span class="p">{</span><span class="na">id</span> <span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="na">name</span> <span class="p">:</span> <span class="dl">'</span><span class="s1">C++</span><span class="dl">'</span><span class="p">},</span>
    <span class="p">{</span><span class="na">id</span> <span class="p">:</span> <span class="mi">3</span><span class="p">,</span> <span class="na">name</span> <span class="p">:</span> <span class="dl">'</span><span class="s1">C#</span><span class="dl">'</span><span class="p">},</span>
    <span class="p">{</span><span class="na">id</span> <span class="p">:</span> <span class="mi">4</span><span class="p">,</span> <span class="na">name</span> <span class="p">:</span> <span class="dl">'</span><span class="s1">JAVA</span><span class="dl">'</span><span class="p">},</span>
    <span class="p">{</span><span class="na">id</span> <span class="p">:</span> <span class="mi">5</span><span class="p">,</span> <span class="na">name</span> <span class="p">:</span> <span class="dl">'</span><span class="s1">Cotlin</span><span class="dl">'</span><span class="p">},</span>
    <span class="p">{</span><span class="na">id</span> <span class="p">:</span> <span class="mi">6</span><span class="p">,</span> <span class="na">name</span> <span class="p">:</span> <span class="dl">'</span><span class="s1">Javascript</span><span class="dl">'</span><span class="p">},</span>
    <span class="p">{</span><span class="na">id</span> <span class="p">:</span> <span class="mi">7</span><span class="p">,</span> <span class="na">name</span> <span class="p">:</span> <span class="dl">'</span><span class="s1">python</span><span class="dl">'</span><span class="p">},</span>
    <span class="p">{</span><span class="na">id</span> <span class="p">:</span> <span class="mi">8</span><span class="p">,</span> <span class="na">name</span> <span class="p">:</span> <span class="dl">'</span><span class="s1">PHP</span><span class="dl">'</span><span class="p">},</span>
    <span class="p">{</span><span class="na">id</span> <span class="p">:</span> <span class="mi">9</span><span class="p">,</span> <span class="na">name</span> <span class="p">:</span> <span class="dl">'</span><span class="s1">Ruby</span><span class="dl">'</span><span class="p">},</span>
    <span class="p">{</span><span class="na">id</span> <span class="p">:</span> <span class="mi">10</span><span class="p">,</span> <span class="na">name</span> <span class="p">:</span> <span class="dl">'</span><span class="s1">Objective-C</span><span class="dl">'</span><span class="p">},</span>
    <span class="p">{</span><span class="na">id</span> <span class="p">:</span> <span class="mi">11</span><span class="p">,</span> <span class="na">name</span> <span class="p">:</span> <span class="dl">'</span><span class="s1">Swift</span><span class="dl">'</span><span class="p">}];</span>

<span class="c1">// ==============프로그래밍언어 리스트===================</span>
<span class="c1">// 프로그래밍언어 전체 리스트를 리턴</span>
<span class="nx">router</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">'</span><span class="s1">/</span><span class="dl">'</span><span class="p">,</span> <span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>    
    <span class="nx">res</span><span class="p">.</span><span class="nx">status</span><span class="p">(</span><span class="mi">200</span><span class="p">).</span><span class="nx">json</span><span class="p">({</span> <span class="na">data_list</span> <span class="p">:</span> <span class="nx">languages</span><span class="p">});</span>
<span class="p">});</span>
<span class="c1">// 특정 프로그래밍언어의 정보를 리턴</span>
<span class="nx">router</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">'</span><span class="s1">/:id</span><span class="dl">'</span><span class="p">,</span> <span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">foundLanguage</span> <span class="o">=</span> <span class="nx">languages</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="nx">x</span><span class="o">=&gt;</span><span class="nx">x</span><span class="p">.</span><span class="nx">id</span> <span class="o">==</span> <span class="nx">req</span><span class="p">.</span><span class="nx">params</span><span class="p">.</span><span class="nx">id</span><span class="p">);</span>
    <span class="k">if</span><span class="p">(</span><span class="nx">foundLanguage</span><span class="p">){</span>
        <span class="nx">res</span><span class="p">.</span><span class="nx">status</span><span class="p">(</span><span class="mi">200</span><span class="p">).</span><span class="nx">json</span><span class="p">({</span> <span class="na">message</span> <span class="p">:</span> <span class="dl">'</span><span class="s1">success</span><span class="dl">'</span><span class="p">,</span> <span class="na">data</span> <span class="p">:</span> <span class="nx">foundLanguage</span><span class="p">});</span>
    <span class="p">}</span><span class="k">else</span><span class="p">{</span>
        <span class="nx">res</span><span class="p">.</span><span class="nx">status</span><span class="p">(</span><span class="mi">404</span><span class="p">).</span><span class="nx">json</span><span class="p">({</span> <span class="na">message</span> <span class="p">:</span> <span class="dl">'</span><span class="s1">language not found</span><span class="dl">'</span><span class="p">});</span>
    <span class="p">}</span>
<span class="p">});</span>
<span class="c1">// 프로그래밍언어 추가</span>
<span class="nx">router</span><span class="p">.</span><span class="nx">post</span><span class="p">(</span><span class="dl">'</span><span class="s1">/</span><span class="dl">'</span><span class="p">,</span> <span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="k">if</span><span class="p">(</span><span class="nx">req</span><span class="p">.</span><span class="nx">body</span> <span class="o">&amp;&amp;</span> <span class="nx">req</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">name</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">const</span> <span class="nx">newLanguage</span> <span class="o">=</span> <span class="p">{</span> <span class="na">id</span> <span class="p">:</span> <span class="nx">languages</span><span class="p">.</span><span class="nx">length</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="na">name</span> <span class="p">:</span> <span class="nx">req</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">name</span> <span class="p">};</span>
        <span class="nx">languages</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">newLanguage</span><span class="p">);</span>
        <span class="nx">res</span><span class="p">.</span><span class="nx">status</span><span class="p">(</span><span class="mi">200</span><span class="p">).</span><span class="nx">json</span><span class="p">({</span> <span class="na">message</span> <span class="p">:</span> <span class="dl">'</span><span class="s1">success</span><span class="dl">'</span><span class="p">,</span> <span class="na">data</span> <span class="p">:</span> <span class="nx">newLanguage</span><span class="p">});</span>
    <span class="p">}</span> <span class="k">else</span> <span class="nx">res</span><span class="p">.</span><span class="nx">status</span><span class="p">(</span><span class="mi">400</span><span class="p">).</span><span class="nx">json</span><span class="p">({</span> <span class="na">message</span> <span class="p">:</span> <span class="dl">'</span><span class="s1">name(body) is required</span><span class="dl">'</span><span class="p">});</span>
<span class="p">});</span>
<span class="c1">// 프로그래밍언어 수정</span>
<span class="nx">router</span><span class="p">.</span><span class="nx">put</span><span class="p">(</span><span class="dl">'</span><span class="s1">/</span><span class="dl">'</span><span class="p">,</span> <span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="k">if</span><span class="p">(</span><span class="nx">req</span><span class="p">.</span><span class="nx">body</span> <span class="o">&amp;&amp;</span> <span class="nx">req</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">id</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">const</span> <span class="nx">foundLanguage</span> <span class="o">=</span> <span class="nx">languages</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="nx">x</span><span class="o">=&gt;</span><span class="nb">Number</span><span class="p">(</span><span class="nx">x</span><span class="p">.</span><span class="nx">id</span><span class="p">)</span><span class="o">==</span> <span class="nb">Number</span><span class="p">(</span><span class="nx">req</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">id</span><span class="p">));</span>
        <span class="k">if</span><span class="p">(</span><span class="nx">foundLanguage</span><span class="p">){</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">req</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">name</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">foundLanguage</span><span class="p">.</span><span class="nx">name</span> <span class="o">=</span> <span class="nx">req</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">name</span><span class="p">;</span>          
                <span class="nx">res</span><span class="p">.</span><span class="nx">status</span><span class="p">(</span><span class="mi">200</span><span class="p">).</span><span class="nx">json</span><span class="p">({</span> <span class="na">message</span> <span class="p">:</span> <span class="dl">'</span><span class="s1">success</span><span class="dl">'</span><span class="p">,</span> <span class="na">data</span> <span class="p">:</span> <span class="nx">foundLanguage</span><span class="p">});</span>      
            <span class="p">}</span><span class="k">else</span> <span class="nx">res</span><span class="p">.</span><span class="nx">status</span><span class="p">(</span><span class="mi">400</span><span class="p">).</span><span class="nx">json</span><span class="p">({</span> <span class="na">message</span> <span class="p">:</span> <span class="dl">'</span><span class="s1">name(body) is required</span><span class="dl">'</span><span class="p">});</span>
        <span class="p">}</span><span class="k">else</span> <span class="nx">res</span><span class="p">.</span><span class="nx">status</span><span class="p">(</span><span class="mi">404</span><span class="p">).</span><span class="nx">json</span><span class="p">({</span> <span class="na">message</span> <span class="p">:</span> <span class="dl">'</span><span class="s1">language not found</span><span class="dl">'</span><span class="p">});</span>
    <span class="p">}</span> <span class="k">else</span> <span class="nx">res</span><span class="p">.</span><span class="nx">status</span><span class="p">(</span><span class="mi">400</span><span class="p">).</span><span class="nx">json</span><span class="p">({</span> <span class="na">message</span> <span class="p">:</span> <span class="dl">'</span><span class="s1">id(body) is required</span><span class="dl">'</span><span class="p">})</span>
<span class="p">});</span>
<span class="c1">// 전체 프로그래밍언어 삭제 </span>
<span class="nx">router</span><span class="p">.</span><span class="k">delete</span><span class="p">(</span><span class="dl">'</span><span class="s1">/</span><span class="dl">'</span><span class="p">,</span> <span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">languages</span> <span class="o">=</span> <span class="p">[];</span>
    <span class="nx">res</span><span class="p">.</span><span class="nx">status</span><span class="p">(</span><span class="mi">200</span><span class="p">).</span><span class="nx">json</span><span class="p">({</span><span class="na">message</span> <span class="p">:</span> <span class="dl">'</span><span class="s1">success</span><span class="dl">'</span><span class="p">});</span>
<span class="p">});</span>
<span class="c1">// 특정 프로그래밍언어 삭제</span>
<span class="nx">router</span><span class="p">.</span><span class="k">delete</span><span class="p">(</span><span class="dl">'</span><span class="s1">/:id</span><span class="dl">'</span><span class="p">,</span> <span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="k">if</span><span class="p">(</span><span class="nx">req</span><span class="p">.</span><span class="nx">params</span><span class="p">.</span><span class="nx">id</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">const</span> <span class="nx">foundIndex</span> <span class="o">=</span> <span class="nx">languages</span><span class="p">.</span><span class="nx">findIndex</span><span class="p">(</span><span class="nx">x</span><span class="o">=&gt;</span><span class="nb">Number</span><span class="p">(</span><span class="nx">x</span><span class="p">.</span><span class="nx">id</span><span class="p">)</span> <span class="o">==</span> <span class="nb">Number</span><span class="p">(</span><span class="nx">req</span><span class="p">.</span><span class="nx">params</span><span class="p">.</span><span class="nx">id</span><span class="p">));</span>
        <span class="k">if</span><span class="p">(</span><span class="nx">foundIndex</span> <span class="o">!=</span> <span class="o">-</span><span class="mi">1</span><span class="p">){</span>
            <span class="nx">languages</span><span class="p">.</span><span class="nx">splice</span><span class="p">(</span><span class="nx">foundIndex</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
            <span class="nx">res</span><span class="p">.</span><span class="nx">status</span><span class="p">(</span><span class="mi">200</span><span class="p">).</span><span class="nx">json</span><span class="p">({</span> <span class="na">message</span> <span class="p">:</span> <span class="dl">'</span><span class="s1">success</span><span class="dl">'</span><span class="p">});</span>
        <span class="p">}</span><span class="k">else</span> <span class="nx">res</span><span class="p">.</span><span class="nx">status</span><span class="p">(</span><span class="mi">404</span><span class="p">).</span><span class="nx">json</span><span class="p">({</span> <span class="na">message</span> <span class="p">:</span> <span class="dl">'</span><span class="s1">language not found</span><span class="dl">'</span><span class="p">});</span>
    <span class="p">}</span> <span class="k">else</span> <span class="nx">res</span><span class="p">.</span><span class="nx">status</span><span class="p">(</span><span class="mi">400</span><span class="p">).</span><span class="nx">json</span><span class="p">({</span> <span class="na">message</span> <span class="p">:</span> <span class="dl">'</span><span class="s1">:id(params) is required</span><span class="dl">'</span><span class="p">})</span>
<span class="p">});</span>    

<span class="kd">let</span> <span class="nx">books</span> <span class="o">=</span> <span class="p">[</span> <span class="c1">//프로그래밍 언어 관련 서적</span>
    <span class="p">{</span><span class="na">id</span> <span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="na">language_id</span> <span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="na">name</span> <span class="p">:</span> <span class="dl">'</span><span class="s1">혼자 공부하는 C언어</span><span class="dl">'</span><span class="p">},</span>
    <span class="p">{</span><span class="na">id</span> <span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="na">language_id</span> <span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="na">name</span> <span class="p">:</span> <span class="dl">'</span><span class="s1">Do it! C언어 입문</span><span class="dl">'</span><span class="p">},</span>
    <span class="p">{</span><span class="na">id</span> <span class="p">:</span> <span class="mi">3</span><span class="p">,</span> <span class="na">language_id</span> <span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="na">name</span> <span class="p">:</span> <span class="dl">'</span><span class="s1">열혈 C프로그래밍</span><span class="dl">'</span><span class="p">},</span>
    <span class="p">{</span><span class="na">id</span> <span class="p">:</span> <span class="mi">4</span><span class="p">,</span> <span class="na">language_id</span> <span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="na">name</span> <span class="p">:</span> <span class="dl">'</span><span class="s1">열혈 C++프로그래밍</span><span class="dl">'</span><span class="p">},</span>
    <span class="p">{</span><span class="na">id</span> <span class="p">:</span> <span class="mi">5</span><span class="p">,</span> <span class="na">language_id</span> <span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="na">name</span> <span class="p">:</span> <span class="dl">'</span><span class="s1">Effective Mordern C++</span><span class="dl">'</span><span class="p">},</span>
    <span class="p">{</span><span class="na">id</span> <span class="p">:</span> <span class="mi">6</span><span class="p">,</span> <span class="na">language_id</span> <span class="p">:</span> <span class="mi">3</span><span class="p">,</span> <span class="na">name</span> <span class="p">:</span> <span class="dl">'</span><span class="s1">C# 교과서</span><span class="dl">'</span><span class="p">},</span>
    <span class="p">{</span><span class="na">id</span> <span class="p">:</span> <span class="mi">7</span><span class="p">,</span> <span class="na">language_id</span> <span class="p">:</span> <span class="mi">3</span><span class="p">,</span> <span class="na">name</span> <span class="p">:</span> <span class="dl">'</span><span class="s1">유지보수 가능한 코딩의 기술 C#편</span><span class="dl">'</span><span class="p">},</span>
    <span class="p">{</span><span class="na">id</span> <span class="p">:</span> <span class="mi">8</span><span class="p">,</span> <span class="na">language_id</span> <span class="p">:</span> <span class="mi">4</span><span class="p">,</span> <span class="na">name</span> <span class="p">:</span> <span class="dl">'</span><span class="s1">JAVA의 정석</span><span class="dl">'</span><span class="p">},</span>
    <span class="p">{</span><span class="na">id</span> <span class="p">:</span> <span class="mi">9</span><span class="p">,</span> <span class="na">language_id</span> <span class="p">:</span> <span class="mi">4</span><span class="p">,</span> <span class="na">name</span> <span class="p">:</span> <span class="dl">'</span><span class="s1">이펙티브 자바</span><span class="dl">'</span><span class="p">},</span>
    <span class="p">{</span><span class="na">id</span> <span class="p">:</span> <span class="mi">10</span><span class="p">,</span> <span class="na">language_id</span> <span class="p">:</span> <span class="mi">5</span><span class="p">,</span> <span class="na">name</span> <span class="p">:</span> <span class="dl">'</span><span class="s1">이것이 안드로이드다 with 코틀린</span><span class="dl">'</span><span class="p">},</span>
    <span class="p">{</span><span class="na">id</span> <span class="p">:</span> <span class="mi">11</span><span class="p">,</span> <span class="na">language_id</span> <span class="p">:</span> <span class="mi">5</span><span class="p">,</span> <span class="na">name</span> <span class="p">:</span> <span class="dl">'</span><span class="s1">Do it! 깡샘의 안드로이드 앱 프로그래밍 with 코틀린</span><span class="dl">'</span><span class="p">},</span>
    <span class="p">{</span><span class="na">id</span> <span class="p">:</span> <span class="mi">12</span><span class="p">,</span> <span class="na">language_id</span> <span class="p">:</span> <span class="mi">6</span><span class="p">,</span> <span class="na">name</span> <span class="p">:</span> <span class="dl">'</span><span class="s1">실전에서 써먹는 JavaScript</span><span class="dl">'</span><span class="p">},</span>
    <span class="p">{</span><span class="na">id</span> <span class="p">:</span> <span class="mi">13</span><span class="p">,</span> <span class="na">language_id</span> <span class="p">:</span> <span class="mi">6</span><span class="p">,</span> <span class="na">name</span> <span class="p">:</span> <span class="dl">'</span><span class="s1">읽기 좋은 자바스크립트 코딩기법</span><span class="dl">'</span><span class="p">},</span>
    <span class="p">{</span><span class="na">id</span> <span class="p">:</span> <span class="mi">14</span><span class="p">,</span> <span class="na">language_id</span> <span class="p">:</span> <span class="mi">7</span><span class="p">,</span> <span class="na">name</span> <span class="p">:</span> <span class="dl">'</span><span class="s1">데이터 분석을 위한 파이썬</span><span class="dl">'</span><span class="p">},</span>
    <span class="p">{</span><span class="na">id</span> <span class="p">:</span> <span class="mi">15</span><span class="p">,</span> <span class="na">language_id</span> <span class="p">:</span> <span class="mi">7</span><span class="p">,</span> <span class="na">name</span> <span class="p">:</span> <span class="dl">'</span><span class="s1">점프 투 파이썬</span><span class="dl">'</span><span class="p">},</span>
    <span class="p">{</span><span class="na">id</span> <span class="p">:</span> <span class="mi">16</span><span class="p">,</span> <span class="na">language_id</span> <span class="p">:</span> <span class="mi">8</span><span class="p">,</span> <span class="na">name</span> <span class="p">:</span> <span class="dl">'</span><span class="s1">넘버투 PHP</span><span class="dl">'</span><span class="p">},</span>
    <span class="p">{</span><span class="na">id</span> <span class="p">:</span> <span class="mi">17</span><span class="p">,</span> <span class="na">language_id</span> <span class="p">:</span> <span class="mi">11</span><span class="p">,</span> <span class="na">name</span> <span class="p">:</span> <span class="dl">'</span><span class="s1">Swift 프로그래밍</span><span class="dl">'</span><span class="p">}];</span>    

<span class="c1">// ==============프로그래밍언어 책 리스트===================</span>
<span class="c1">// 특정 언어의 책 리스트를 리턴</span>

<span class="nx">router</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">'</span><span class="s1">/:language_id/books</span><span class="dl">'</span><span class="p">,</span> <span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span> 
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">req</span><span class="p">.</span><span class="nx">params</span><span class="p">.</span><span class="nx">language_id</span><span class="p">);</span>   
    <span class="kd">const</span> <span class="nx">foundLanguage</span> <span class="o">=</span> <span class="nx">languages</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="nx">x</span><span class="o">=&gt;</span><span class="nx">x</span><span class="p">.</span><span class="nx">id</span> <span class="o">==</span> <span class="nx">req</span><span class="p">.</span><span class="nx">params</span><span class="p">.</span><span class="nx">language_id</span><span class="p">);</span>
    <span class="k">if</span><span class="p">(</span><span class="nx">foundLanguage</span><span class="p">){</span>
        <span class="kd">const</span> <span class="nx">filteredBooks</span> <span class="o">=</span> <span class="nx">books</span><span class="p">.</span><span class="nx">filter</span><span class="p">(</span><span class="nx">x</span><span class="o">=&gt;</span> <span class="nx">x</span><span class="p">.</span><span class="nx">language_id</span> <span class="o">==</span> <span class="nx">req</span><span class="p">.</span><span class="nx">params</span><span class="p">.</span><span class="nx">language_id</span><span class="p">);</span>    
        <span class="nx">res</span><span class="p">.</span><span class="nx">status</span><span class="p">(</span><span class="mi">200</span><span class="p">).</span><span class="nx">json</span><span class="p">({</span> <span class="na">message</span> <span class="p">:</span> <span class="dl">'</span><span class="s1">success</span><span class="dl">'</span><span class="p">,</span> <span class="na">data_list</span> <span class="p">:</span> <span class="nx">filteredBooks</span><span class="p">});</span> 
    <span class="p">}</span><span class="k">else</span> <span class="nx">res</span><span class="p">.</span><span class="nx">status</span><span class="p">(</span><span class="mi">400</span><span class="p">).</span><span class="nx">json</span><span class="p">({</span> <span class="na">message</span> <span class="p">:</span> <span class="dl">'</span><span class="s1">language not found</span><span class="dl">'</span><span class="p">});</span> 
<span class="p">});</span>

<span class="c1">// 특정 언어의 책 추가</span>
<span class="nx">router</span><span class="p">.</span><span class="nx">post</span><span class="p">(</span><span class="dl">'</span><span class="s1">/:language_id/books</span><span class="dl">'</span><span class="p">,</span> <span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">foundLanguage</span> <span class="o">=</span> <span class="nx">languages</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="nx">x</span><span class="o">=&gt;</span><span class="nx">x</span><span class="p">.</span><span class="nx">id</span> <span class="o">==</span> <span class="nx">req</span><span class="p">.</span><span class="nx">params</span><span class="p">.</span><span class="nx">language_id</span><span class="p">);</span>
    <span class="k">if</span><span class="p">(</span><span class="nx">foundLanguage</span><span class="p">){</span>
        <span class="k">if</span><span class="p">(</span><span class="nx">req</span><span class="p">.</span><span class="nx">body</span> <span class="o">&amp;&amp;</span> <span class="nx">req</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">name</span><span class="p">){</span>
            <span class="kd">const</span> <span class="nx">newBook</span> <span class="o">=</span> <span class="p">{</span><span class="na">id</span><span class="p">:</span> <span class="nx">books</span><span class="p">.</span><span class="nx">length</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="na">language_id</span> <span class="p">:</span> <span class="nb">Number</span><span class="p">(</span><span class="nx">req</span><span class="p">.</span><span class="nx">params</span><span class="p">.</span><span class="nx">language_id</span><span class="p">),</span> <span class="na">name</span> <span class="p">:</span> <span class="nx">req</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">name</span><span class="p">};</span>
            <span class="nx">books</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">newBook</span><span class="p">);</span>
            <span class="nx">res</span><span class="p">.</span><span class="nx">status</span><span class="p">(</span><span class="mi">200</span><span class="p">).</span><span class="nx">json</span><span class="p">({</span> <span class="na">message</span> <span class="p">:</span> <span class="dl">'</span><span class="s1">success</span><span class="dl">'</span><span class="p">,</span> <span class="na">data</span> <span class="p">:</span> <span class="nx">newBook</span><span class="p">});</span> 
        <span class="p">}</span><span class="k">else</span> <span class="nx">res</span><span class="p">.</span><span class="nx">status</span><span class="p">(</span><span class="mi">400</span><span class="p">).</span><span class="nx">json</span><span class="p">({</span> <span class="na">message</span> <span class="p">:</span> <span class="dl">'</span><span class="s1">name(body) is required</span><span class="dl">'</span><span class="p">});</span>         
    <span class="p">}</span><span class="k">else</span> <span class="nx">res</span><span class="p">.</span><span class="nx">status</span><span class="p">(</span><span class="mi">404</span><span class="p">).</span><span class="nx">json</span><span class="p">({</span> <span class="na">message</span> <span class="p">:</span> <span class="dl">'</span><span class="s1">language not found</span><span class="dl">'</span><span class="p">});</span> 
<span class="p">});</span>
<span class="c1">// 특정 언어의 책 수정</span>
<span class="nx">router</span><span class="p">.</span><span class="nx">put</span><span class="p">(</span><span class="dl">'</span><span class="s1">/:language_id/books</span><span class="dl">'</span><span class="p">,</span> <span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">foundLanguage</span> <span class="o">=</span> <span class="nx">languages</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="nx">x</span><span class="o">=&gt;</span><span class="nx">x</span><span class="p">.</span><span class="nx">id</span> <span class="o">==</span> <span class="nx">req</span><span class="p">.</span><span class="nx">params</span><span class="p">.</span><span class="nx">language_id</span><span class="p">);</span>
    <span class="k">if</span><span class="p">(</span><span class="nx">foundLanguage</span><span class="p">){</span>
        <span class="k">if</span><span class="p">(</span><span class="nx">req</span><span class="p">.</span><span class="nx">body</span> <span class="o">&amp;&amp;</span> <span class="nx">req</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">id</span> <span class="o">&amp;&amp;</span> <span class="nx">req</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">name</span><span class="p">){</span>
            <span class="kd">const</span> <span class="nx">filteredBooks</span> <span class="o">=</span> <span class="nx">books</span><span class="p">.</span><span class="nx">filter</span><span class="p">(</span><span class="nx">x</span><span class="o">=&gt;</span><span class="nx">x</span><span class="p">.</span><span class="nx">language_id</span> <span class="o">==</span> <span class="nx">req</span><span class="p">.</span><span class="nx">params</span><span class="p">.</span><span class="nx">language_id</span><span class="p">);</span>
            <span class="kd">const</span> <span class="nx">foundBook</span> <span class="o">=</span> <span class="nx">filteredBooks</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="nx">x</span><span class="o">=&gt;</span><span class="nx">x</span><span class="p">.</span><span class="nx">id</span> <span class="o">==</span> <span class="nx">req</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">id</span><span class="p">);</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">foundBook</span><span class="p">){</span>
                <span class="nx">foundBook</span><span class="p">.</span><span class="nx">name</span> <span class="o">=</span> <span class="nx">req</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">name</span><span class="p">;</span>
                <span class="nx">res</span><span class="p">.</span><span class="nx">status</span><span class="p">(</span><span class="mi">200</span><span class="p">).</span><span class="nx">json</span><span class="p">({</span> <span class="na">message</span> <span class="p">:</span> <span class="dl">'</span><span class="s1">success</span><span class="dl">'</span><span class="p">,</span> <span class="na">data</span> <span class="p">:</span> <span class="nx">foundBook</span><span class="p">});</span>
            <span class="p">}</span><span class="k">else</span> <span class="nx">res</span><span class="p">.</span><span class="nx">status</span><span class="p">(</span><span class="mi">404</span><span class="p">).</span><span class="nx">json</span><span class="p">({</span> <span class="na">message</span> <span class="p">:</span> <span class="dl">'</span><span class="s1">book not found</span><span class="dl">'</span><span class="p">});</span>
        <span class="p">}</span><span class="k">else</span> <span class="nx">res</span><span class="p">.</span><span class="nx">status</span><span class="p">(</span><span class="mi">400</span><span class="p">).</span><span class="nx">json</span><span class="p">({</span> <span class="na">message</span> <span class="p">:</span> <span class="dl">'</span><span class="s1">id, name(body) is required</span><span class="dl">'</span><span class="p">});</span>
    <span class="p">}</span><span class="k">else</span> <span class="nx">res</span><span class="p">.</span><span class="nx">status</span><span class="p">(</span><span class="mi">404</span><span class="p">).</span><span class="nx">json</span><span class="p">({</span> <span class="na">message</span> <span class="p">:</span> <span class="dl">'</span><span class="s1">language not found</span><span class="dl">'</span><span class="p">});</span> 
<span class="p">});</span>
<span class="c1">// 특정 언어의 책 삭제</span>
<span class="nx">router</span><span class="p">.</span><span class="k">delete</span><span class="p">(</span><span class="dl">'</span><span class="s1">/:language_id/books/:id</span><span class="dl">'</span><span class="p">,</span> <span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">foundLanguage</span> <span class="o">=</span> <span class="nx">languages</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="nx">x</span><span class="o">=&gt;</span><span class="nx">x</span><span class="p">.</span><span class="nx">id</span> <span class="o">==</span> <span class="nx">req</span><span class="p">.</span><span class="nx">params</span><span class="p">.</span><span class="nx">language_id</span><span class="p">);</span>
    <span class="k">if</span><span class="p">(</span><span class="nx">foundLanguage</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">const</span> <span class="nx">foundIndex</span> <span class="o">=</span> <span class="nx">books</span><span class="p">.</span><span class="nx">findIndex</span><span class="p">(</span><span class="nx">x</span><span class="o">=&gt;</span><span class="nx">x</span><span class="p">.</span><span class="nx">id</span> <span class="o">==</span> <span class="nx">req</span><span class="p">.</span><span class="nx">params</span><span class="p">.</span><span class="nx">id</span><span class="p">);</span>         
        <span class="k">if</span><span class="p">(</span><span class="nx">foundIndex</span> <span class="o">!=</span> <span class="o">-</span><span class="mi">1</span><span class="p">){</span>
            <span class="nx">books</span><span class="p">.</span><span class="nx">splice</span><span class="p">(</span><span class="nx">foundIndex</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
            <span class="nx">res</span><span class="p">.</span><span class="nx">status</span><span class="p">(</span><span class="mi">200</span><span class="p">).</span><span class="nx">json</span><span class="p">({</span> <span class="na">message</span> <span class="p">:</span> <span class="dl">'</span><span class="s1">success</span><span class="dl">'</span><span class="p">});</span> 
        <span class="p">}</span><span class="k">else</span> <span class="nx">res</span><span class="p">.</span><span class="nx">status</span><span class="p">(</span><span class="mi">404</span><span class="p">).</span><span class="nx">json</span><span class="p">({</span> <span class="na">message</span> <span class="p">:</span> <span class="dl">'</span><span class="s1">book not found</span><span class="dl">'</span><span class="p">});</span> 
    <span class="p">}</span> <span class="k">else</span> <span class="nx">res</span><span class="p">.</span><span class="nx">status</span><span class="p">(</span><span class="mi">404</span><span class="p">).</span><span class="nx">json</span><span class="p">({</span> <span class="na">message</span> <span class="p">:</span> <span class="dl">'</span><span class="s1">language not found</span><span class="dl">'</span><span class="p">});</span>          
<span class="p">});</span>




<span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="nx">router</span><span class="p">;</span>
</pre></td>
</tr></tbody></table></code></div></div>
<h3 id="step1-자원단위로-분리하기-appjs">[step1 자원단위로 분리하기] /app.js</h3>
<div lang="js" class="language-js highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr>
<td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
</pre></td>
<td class="rouge-code"><pre><span class="kd">const</span> <span class="nx">express</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">express</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">app</span> <span class="o">=</span> <span class="nx">express</span><span class="p">();</span>
<span class="nx">app</span><span class="p">.</span><span class="kd">set</span><span class="p">(</span><span class="dl">'</span><span class="s1">port</span><span class="dl">'</span><span class="p">,</span> <span class="mi">3000</span><span class="p">);</span>
<span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="nx">express</span><span class="p">.</span><span class="nx">json</span><span class="p">());</span>

<span class="kd">const</span> <span class="nx">presidentsRouter</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">./routes/presidents.js</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">languagesRouter</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">./routes/languages.js</span><span class="dl">'</span><span class="p">);</span>

<span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="dl">'</span><span class="s1">/presidents</span><span class="dl">'</span><span class="p">,</span> <span class="nx">presidentsRouter</span><span class="p">);</span>
<span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="dl">'</span><span class="s1">/languages</span><span class="dl">'</span><span class="p">,</span> <span class="nx">languagesRouter</span><span class="p">);</span>

<span class="c1">// index</span>
<span class="nx">app</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">'</span><span class="s1">/</span><span class="dl">'</span><span class="p">,</span> <span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">res</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="dl">'</span><span class="s1">Hello Express!!</span><span class="dl">'</span><span class="p">);</span>
<span class="p">});</span>

<span class="c1">// 404 middleware</span>
<span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">((</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">,</span> <span class="nx">next</span><span class="p">)</span><span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">res</span><span class="p">.</span><span class="nx">status</span><span class="p">(</span><span class="mi">404</span><span class="p">).</span><span class="nx">json</span><span class="p">({</span><span class="na">message</span> <span class="p">:</span> <span class="dl">'</span><span class="s1">api not found (no match entry-point)</span><span class="dl">'</span><span class="p">});</span>
<span class="p">})</span>

<span class="nx">app</span><span class="p">.</span><span class="nx">listen</span><span class="p">(</span><span class="nx">app</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">'</span><span class="s1">port</span><span class="dl">'</span><span class="p">),</span> <span class="p">()</span><span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">server is running on </span><span class="dl">'</span><span class="p">,</span> <span class="nx">app</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">'</span><span class="s1">port</span><span class="dl">'</span><span class="p">));</span>
<span class="p">});</span>
</pre></td>
</tr></tbody></table></code></div></div>
<p>이렇게만 해도 app.js가 상당히 깔끔해진 것을 알 수 있다 !</p>
<p>그러나, languages router가 그래도 상당히 지저분하다.<br> 게다가 languages 하위계층에 books 관련 api들은 /:language_id/books 가 반복 사용되고 있다.<br> 따라서 <strong>계층구조</strong>로 한번 더 분리해주자.</p>
<h2 id="step-2-계층구조로-분리하기">Step 2 계층구조로 분리하기</h2>
<div class="table-wrapper"><table>
<thead><tr><th style="text-align: center"><img data-proofer-ignore data-src="/img/20210905002.png" alt="20210905002"></th></tr></thead>
<tbody><tr><td style="text-align: center"><em>routes 계층구조</em></td></tr></tbody>
</table></div>
<p>routes에 languages 폴더를 만들고 languages.js 안에 있던 book 관련 api를 분리하여 books.js를 만들었다.</p>
<h3 id="step2-계층구조로-분리하기-routeslanguagesbooksjs">[step2 계층구조로 분리하기] /routes/languages/books.js</h3>
<div lang="js" class="language-js highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr>
<td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
</pre></td>
<td class="rouge-code"><pre><span class="kd">const</span> <span class="nx">express</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">express</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">router</span> <span class="o">=</span> <span class="nx">express</span><span class="p">.</span><span class="nx">Router</span><span class="p">({</span><span class="na">mergeParams</span><span class="p">:</span> <span class="kc">true</span><span class="p">});</span> <span class="c1">// 부모의 매개변수를 상속받도록 함</span>

<span class="kd">let</span> <span class="nx">languages</span> <span class="o">=</span> <span class="p">[</span> <span class="c1">//프로그래밍 언어들</span>
    <span class="p">{</span><span class="na">id</span> <span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="na">name</span> <span class="p">:</span> <span class="dl">'</span><span class="s1">C</span><span class="dl">'</span><span class="p">},</span>
    <span class="p">{</span><span class="na">id</span> <span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="na">name</span> <span class="p">:</span> <span class="dl">'</span><span class="s1">C++</span><span class="dl">'</span><span class="p">},</span>
    <span class="p">{</span><span class="na">id</span> <span class="p">:</span> <span class="mi">3</span><span class="p">,</span> <span class="na">name</span> <span class="p">:</span> <span class="dl">'</span><span class="s1">C#</span><span class="dl">'</span><span class="p">},</span>
    <span class="p">{</span><span class="na">id</span> <span class="p">:</span> <span class="mi">4</span><span class="p">,</span> <span class="na">name</span> <span class="p">:</span> <span class="dl">'</span><span class="s1">JAVA</span><span class="dl">'</span><span class="p">},</span>
    <span class="p">{</span><span class="na">id</span> <span class="p">:</span> <span class="mi">5</span><span class="p">,</span> <span class="na">name</span> <span class="p">:</span> <span class="dl">'</span><span class="s1">Cotlin</span><span class="dl">'</span><span class="p">},</span>
    <span class="p">{</span><span class="na">id</span> <span class="p">:</span> <span class="mi">6</span><span class="p">,</span> <span class="na">name</span> <span class="p">:</span> <span class="dl">'</span><span class="s1">Javascript</span><span class="dl">'</span><span class="p">},</span>
    <span class="p">{</span><span class="na">id</span> <span class="p">:</span> <span class="mi">7</span><span class="p">,</span> <span class="na">name</span> <span class="p">:</span> <span class="dl">'</span><span class="s1">python</span><span class="dl">'</span><span class="p">},</span>
    <span class="p">{</span><span class="na">id</span> <span class="p">:</span> <span class="mi">8</span><span class="p">,</span> <span class="na">name</span> <span class="p">:</span> <span class="dl">'</span><span class="s1">PHP</span><span class="dl">'</span><span class="p">},</span>
    <span class="p">{</span><span class="na">id</span> <span class="p">:</span> <span class="mi">9</span><span class="p">,</span> <span class="na">name</span> <span class="p">:</span> <span class="dl">'</span><span class="s1">Ruby</span><span class="dl">'</span><span class="p">},</span>
    <span class="p">{</span><span class="na">id</span> <span class="p">:</span> <span class="mi">10</span><span class="p">,</span> <span class="na">name</span> <span class="p">:</span> <span class="dl">'</span><span class="s1">Objective-C</span><span class="dl">'</span><span class="p">},</span>
    <span class="p">{</span><span class="na">id</span> <span class="p">:</span> <span class="mi">11</span><span class="p">,</span> <span class="na">name</span> <span class="p">:</span> <span class="dl">'</span><span class="s1">Swift</span><span class="dl">'</span><span class="p">}];</span>


<span class="kd">let</span> <span class="nx">books</span> <span class="o">=</span> <span class="p">[</span> <span class="c1">//프로그래밍 언어 관련 서적</span>
    <span class="p">{</span><span class="na">id</span> <span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="na">language_id</span> <span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="na">name</span> <span class="p">:</span> <span class="dl">'</span><span class="s1">혼자 공부하는 C언어</span><span class="dl">'</span><span class="p">},</span>
    <span class="p">{</span><span class="na">id</span> <span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="na">language_id</span> <span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="na">name</span> <span class="p">:</span> <span class="dl">'</span><span class="s1">Do it! C언어 입문</span><span class="dl">'</span><span class="p">},</span>
    <span class="p">{</span><span class="na">id</span> <span class="p">:</span> <span class="mi">3</span><span class="p">,</span> <span class="na">language_id</span> <span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="na">name</span> <span class="p">:</span> <span class="dl">'</span><span class="s1">열혈 C프로그래밍</span><span class="dl">'</span><span class="p">},</span>
    <span class="p">{</span><span class="na">id</span> <span class="p">:</span> <span class="mi">4</span><span class="p">,</span> <span class="na">language_id</span> <span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="na">name</span> <span class="p">:</span> <span class="dl">'</span><span class="s1">열혈 C++프로그래밍</span><span class="dl">'</span><span class="p">},</span>
    <span class="p">{</span><span class="na">id</span> <span class="p">:</span> <span class="mi">5</span><span class="p">,</span> <span class="na">language_id</span> <span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="na">name</span> <span class="p">:</span> <span class="dl">'</span><span class="s1">Effective Mordern C++</span><span class="dl">'</span><span class="p">},</span>
    <span class="p">{</span><span class="na">id</span> <span class="p">:</span> <span class="mi">6</span><span class="p">,</span> <span class="na">language_id</span> <span class="p">:</span> <span class="mi">3</span><span class="p">,</span> <span class="na">name</span> <span class="p">:</span> <span class="dl">'</span><span class="s1">C# 교과서</span><span class="dl">'</span><span class="p">},</span>
    <span class="p">{</span><span class="na">id</span> <span class="p">:</span> <span class="mi">7</span><span class="p">,</span> <span class="na">language_id</span> <span class="p">:</span> <span class="mi">3</span><span class="p">,</span> <span class="na">name</span> <span class="p">:</span> <span class="dl">'</span><span class="s1">유지보수 가능한 코딩의 기술 C#편</span><span class="dl">'</span><span class="p">},</span>
    <span class="p">{</span><span class="na">id</span> <span class="p">:</span> <span class="mi">8</span><span class="p">,</span> <span class="na">language_id</span> <span class="p">:</span> <span class="mi">4</span><span class="p">,</span> <span class="na">name</span> <span class="p">:</span> <span class="dl">'</span><span class="s1">JAVA의 정석</span><span class="dl">'</span><span class="p">},</span>
    <span class="p">{</span><span class="na">id</span> <span class="p">:</span> <span class="mi">9</span><span class="p">,</span> <span class="na">language_id</span> <span class="p">:</span> <span class="mi">4</span><span class="p">,</span> <span class="na">name</span> <span class="p">:</span> <span class="dl">'</span><span class="s1">이펙티브 자바</span><span class="dl">'</span><span class="p">},</span>
    <span class="p">{</span><span class="na">id</span> <span class="p">:</span> <span class="mi">10</span><span class="p">,</span> <span class="na">language_id</span> <span class="p">:</span> <span class="mi">5</span><span class="p">,</span> <span class="na">name</span> <span class="p">:</span> <span class="dl">'</span><span class="s1">이것이 안드로이드다 with 코틀린</span><span class="dl">'</span><span class="p">},</span>
    <span class="p">{</span><span class="na">id</span> <span class="p">:</span> <span class="mi">11</span><span class="p">,</span> <span class="na">language_id</span> <span class="p">:</span> <span class="mi">5</span><span class="p">,</span> <span class="na">name</span> <span class="p">:</span> <span class="dl">'</span><span class="s1">Do it! 깡샘의 안드로이드 앱 프로그래밍 with 코틀린</span><span class="dl">'</span><span class="p">},</span>
    <span class="p">{</span><span class="na">id</span> <span class="p">:</span> <span class="mi">12</span><span class="p">,</span> <span class="na">language_id</span> <span class="p">:</span> <span class="mi">6</span><span class="p">,</span> <span class="na">name</span> <span class="p">:</span> <span class="dl">'</span><span class="s1">실전에서 써먹는 JavaScript</span><span class="dl">'</span><span class="p">},</span>
    <span class="p">{</span><span class="na">id</span> <span class="p">:</span> <span class="mi">13</span><span class="p">,</span> <span class="na">language_id</span> <span class="p">:</span> <span class="mi">6</span><span class="p">,</span> <span class="na">name</span> <span class="p">:</span> <span class="dl">'</span><span class="s1">읽기 좋은 자바스크립트 코딩기법</span><span class="dl">'</span><span class="p">},</span>
    <span class="p">{</span><span class="na">id</span> <span class="p">:</span> <span class="mi">14</span><span class="p">,</span> <span class="na">language_id</span> <span class="p">:</span> <span class="mi">7</span><span class="p">,</span> <span class="na">name</span> <span class="p">:</span> <span class="dl">'</span><span class="s1">데이터 분석을 위한 파이썬</span><span class="dl">'</span><span class="p">},</span>
    <span class="p">{</span><span class="na">id</span> <span class="p">:</span> <span class="mi">15</span><span class="p">,</span> <span class="na">language_id</span> <span class="p">:</span> <span class="mi">7</span><span class="p">,</span> <span class="na">name</span> <span class="p">:</span> <span class="dl">'</span><span class="s1">점프 투 파이썬</span><span class="dl">'</span><span class="p">},</span>
    <span class="p">{</span><span class="na">id</span> <span class="p">:</span> <span class="mi">16</span><span class="p">,</span> <span class="na">language_id</span> <span class="p">:</span> <span class="mi">8</span><span class="p">,</span> <span class="na">name</span> <span class="p">:</span> <span class="dl">'</span><span class="s1">넘버투 PHP</span><span class="dl">'</span><span class="p">},</span>
    <span class="p">{</span><span class="na">id</span> <span class="p">:</span> <span class="mi">17</span><span class="p">,</span> <span class="na">language_id</span> <span class="p">:</span> <span class="mi">11</span><span class="p">,</span> <span class="na">name</span> <span class="p">:</span> <span class="dl">'</span><span class="s1">Swift 프로그래밍</span><span class="dl">'</span><span class="p">}];</span>    

<span class="c1">// ==============프로그래밍언어 책 리스트===================</span>
<span class="c1">// 특정 언어의 책 리스트를 리턴</span>

<span class="nx">router</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">'</span><span class="s1">/</span><span class="dl">'</span><span class="p">,</span> <span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span> 
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">req</span><span class="p">.</span><span class="nx">params</span><span class="p">.</span><span class="nx">language_id</span><span class="p">);</span>   
    <span class="kd">const</span> <span class="nx">foundLanguage</span> <span class="o">=</span> <span class="nx">languages</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="nx">x</span><span class="o">=&gt;</span><span class="nx">x</span><span class="p">.</span><span class="nx">id</span> <span class="o">==</span> <span class="nx">req</span><span class="p">.</span><span class="nx">params</span><span class="p">.</span><span class="nx">language_id</span><span class="p">);</span>
    <span class="k">if</span><span class="p">(</span><span class="nx">foundLanguage</span><span class="p">){</span>
        <span class="kd">const</span> <span class="nx">filteredBooks</span> <span class="o">=</span> <span class="nx">books</span><span class="p">.</span><span class="nx">filter</span><span class="p">(</span><span class="nx">x</span><span class="o">=&gt;</span> <span class="nx">x</span><span class="p">.</span><span class="nx">language_id</span> <span class="o">==</span> <span class="nx">req</span><span class="p">.</span><span class="nx">params</span><span class="p">.</span><span class="nx">language_id</span><span class="p">);</span>    
        <span class="nx">res</span><span class="p">.</span><span class="nx">status</span><span class="p">(</span><span class="mi">200</span><span class="p">).</span><span class="nx">json</span><span class="p">({</span> <span class="na">message</span> <span class="p">:</span> <span class="dl">'</span><span class="s1">success</span><span class="dl">'</span><span class="p">,</span> <span class="na">data_list</span> <span class="p">:</span> <span class="nx">filteredBooks</span><span class="p">});</span> 
    <span class="p">}</span><span class="k">else</span> <span class="nx">res</span><span class="p">.</span><span class="nx">status</span><span class="p">(</span><span class="mi">400</span><span class="p">).</span><span class="nx">json</span><span class="p">({</span> <span class="na">message</span> <span class="p">:</span> <span class="dl">'</span><span class="s1">language not found</span><span class="dl">'</span><span class="p">});</span> 
<span class="p">});</span>

<span class="c1">// 특정 언어의 책 추가</span>
<span class="nx">router</span><span class="p">.</span><span class="nx">post</span><span class="p">(</span><span class="dl">'</span><span class="s1">/</span><span class="dl">'</span><span class="p">,</span> <span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">foundLanguage</span> <span class="o">=</span> <span class="nx">languages</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="nx">x</span><span class="o">=&gt;</span><span class="nx">x</span><span class="p">.</span><span class="nx">id</span> <span class="o">==</span> <span class="nx">req</span><span class="p">.</span><span class="nx">params</span><span class="p">.</span><span class="nx">language_id</span><span class="p">);</span>
    <span class="k">if</span><span class="p">(</span><span class="nx">foundLanguage</span><span class="p">){</span>
        <span class="k">if</span><span class="p">(</span><span class="nx">req</span><span class="p">.</span><span class="nx">body</span> <span class="o">&amp;&amp;</span> <span class="nx">req</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">name</span><span class="p">){</span>
            <span class="kd">const</span> <span class="nx">newBook</span> <span class="o">=</span> <span class="p">{</span><span class="na">id</span><span class="p">:</span> <span class="nx">books</span><span class="p">.</span><span class="nx">length</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="na">language_id</span> <span class="p">:</span> <span class="nb">Number</span><span class="p">(</span><span class="nx">req</span><span class="p">.</span><span class="nx">params</span><span class="p">.</span><span class="nx">language_id</span><span class="p">),</span> <span class="na">name</span> <span class="p">:</span> <span class="nx">req</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">name</span><span class="p">};</span>
            <span class="nx">books</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">newBook</span><span class="p">);</span>
            <span class="nx">res</span><span class="p">.</span><span class="nx">status</span><span class="p">(</span><span class="mi">200</span><span class="p">).</span><span class="nx">json</span><span class="p">({</span> <span class="na">message</span> <span class="p">:</span> <span class="dl">'</span><span class="s1">success</span><span class="dl">'</span><span class="p">,</span> <span class="na">data</span> <span class="p">:</span> <span class="nx">newBook</span><span class="p">});</span> 
        <span class="p">}</span><span class="k">else</span> <span class="nx">res</span><span class="p">.</span><span class="nx">status</span><span class="p">(</span><span class="mi">400</span><span class="p">).</span><span class="nx">json</span><span class="p">({</span> <span class="na">message</span> <span class="p">:</span> <span class="dl">'</span><span class="s1">name(body) is required</span><span class="dl">'</span><span class="p">});</span>         
    <span class="p">}</span><span class="k">else</span> <span class="nx">res</span><span class="p">.</span><span class="nx">status</span><span class="p">(</span><span class="mi">404</span><span class="p">).</span><span class="nx">json</span><span class="p">({</span> <span class="na">message</span> <span class="p">:</span> <span class="dl">'</span><span class="s1">language not found</span><span class="dl">'</span><span class="p">});</span> 
<span class="p">});</span>
<span class="c1">// 특정 언어의 책 수정</span>
<span class="nx">router</span><span class="p">.</span><span class="nx">put</span><span class="p">(</span><span class="dl">'</span><span class="s1">/</span><span class="dl">'</span><span class="p">,</span> <span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">foundLanguage</span> <span class="o">=</span> <span class="nx">languages</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="nx">x</span><span class="o">=&gt;</span><span class="nx">x</span><span class="p">.</span><span class="nx">id</span> <span class="o">==</span> <span class="nx">req</span><span class="p">.</span><span class="nx">params</span><span class="p">.</span><span class="nx">language_id</span><span class="p">);</span>
    <span class="k">if</span><span class="p">(</span><span class="nx">foundLanguage</span><span class="p">){</span>
        <span class="k">if</span><span class="p">(</span><span class="nx">req</span><span class="p">.</span><span class="nx">body</span> <span class="o">&amp;&amp;</span> <span class="nx">req</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">id</span> <span class="o">&amp;&amp;</span> <span class="nx">req</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">name</span><span class="p">){</span>
            <span class="kd">const</span> <span class="nx">filteredBooks</span> <span class="o">=</span> <span class="nx">books</span><span class="p">.</span><span class="nx">filter</span><span class="p">(</span><span class="nx">x</span><span class="o">=&gt;</span><span class="nx">x</span><span class="p">.</span><span class="nx">language_id</span> <span class="o">==</span> <span class="nx">req</span><span class="p">.</span><span class="nx">params</span><span class="p">.</span><span class="nx">language_id</span><span class="p">);</span>
            <span class="kd">const</span> <span class="nx">foundBook</span> <span class="o">=</span> <span class="nx">filteredBooks</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="nx">x</span><span class="o">=&gt;</span><span class="nx">x</span><span class="p">.</span><span class="nx">id</span> <span class="o">==</span> <span class="nx">req</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">id</span><span class="p">);</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">foundBook</span><span class="p">){</span>
                <span class="nx">foundBook</span><span class="p">.</span><span class="nx">name</span> <span class="o">=</span> <span class="nx">req</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">name</span><span class="p">;</span>
                <span class="nx">res</span><span class="p">.</span><span class="nx">status</span><span class="p">(</span><span class="mi">200</span><span class="p">).</span><span class="nx">json</span><span class="p">({</span> <span class="na">message</span> <span class="p">:</span> <span class="dl">'</span><span class="s1">success</span><span class="dl">'</span><span class="p">,</span> <span class="na">data</span> <span class="p">:</span> <span class="nx">foundBook</span><span class="p">});</span>
            <span class="p">}</span><span class="k">else</span> <span class="nx">res</span><span class="p">.</span><span class="nx">status</span><span class="p">(</span><span class="mi">404</span><span class="p">).</span><span class="nx">json</span><span class="p">({</span> <span class="na">message</span> <span class="p">:</span> <span class="dl">'</span><span class="s1">book not found</span><span class="dl">'</span><span class="p">});</span>
        <span class="p">}</span><span class="k">else</span> <span class="nx">res</span><span class="p">.</span><span class="nx">status</span><span class="p">(</span><span class="mi">400</span><span class="p">).</span><span class="nx">json</span><span class="p">({</span> <span class="na">message</span> <span class="p">:</span> <span class="dl">'</span><span class="s1">id, name(body) is required</span><span class="dl">'</span><span class="p">});</span>
    <span class="p">}</span><span class="k">else</span> <span class="nx">res</span><span class="p">.</span><span class="nx">status</span><span class="p">(</span><span class="mi">404</span><span class="p">).</span><span class="nx">json</span><span class="p">({</span> <span class="na">message</span> <span class="p">:</span> <span class="dl">'</span><span class="s1">language not found</span><span class="dl">'</span><span class="p">});</span> 
<span class="p">});</span>
<span class="c1">// 특정 언어의 책 삭제</span>
<span class="nx">router</span><span class="p">.</span><span class="k">delete</span><span class="p">(</span><span class="dl">'</span><span class="s1">/:id</span><span class="dl">'</span><span class="p">,</span> <span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">foundLanguage</span> <span class="o">=</span> <span class="nx">languages</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="nx">x</span><span class="o">=&gt;</span><span class="nx">x</span><span class="p">.</span><span class="nx">id</span> <span class="o">==</span> <span class="nx">req</span><span class="p">.</span><span class="nx">params</span><span class="p">.</span><span class="nx">language_id</span><span class="p">);</span>
    <span class="k">if</span><span class="p">(</span><span class="nx">foundLanguage</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">const</span> <span class="nx">foundIndex</span> <span class="o">=</span> <span class="nx">books</span><span class="p">.</span><span class="nx">findIndex</span><span class="p">(</span><span class="nx">x</span><span class="o">=&gt;</span><span class="nx">x</span><span class="p">.</span><span class="nx">id</span> <span class="o">==</span> <span class="nx">req</span><span class="p">.</span><span class="nx">params</span><span class="p">.</span><span class="nx">id</span><span class="p">);</span>         
        <span class="k">if</span><span class="p">(</span><span class="nx">foundIndex</span> <span class="o">!=</span> <span class="o">-</span><span class="mi">1</span><span class="p">){</span>
            <span class="nx">books</span><span class="p">.</span><span class="nx">splice</span><span class="p">(</span><span class="nx">foundIndex</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
            <span class="nx">res</span><span class="p">.</span><span class="nx">status</span><span class="p">(</span><span class="mi">200</span><span class="p">).</span><span class="nx">json</span><span class="p">({</span> <span class="na">message</span> <span class="p">:</span> <span class="dl">'</span><span class="s1">success</span><span class="dl">'</span><span class="p">});</span> 
        <span class="p">}</span><span class="k">else</span> <span class="nx">res</span><span class="p">.</span><span class="nx">status</span><span class="p">(</span><span class="mi">404</span><span class="p">).</span><span class="nx">json</span><span class="p">({</span> <span class="na">message</span> <span class="p">:</span> <span class="dl">'</span><span class="s1">book not found</span><span class="dl">'</span><span class="p">});</span> 
    <span class="p">}</span> <span class="k">else</span> <span class="nx">res</span><span class="p">.</span><span class="nx">status</span><span class="p">(</span><span class="mi">404</span><span class="p">).</span><span class="nx">json</span><span class="p">({</span> <span class="na">message</span> <span class="p">:</span> <span class="dl">'</span><span class="s1">language not found</span><span class="dl">'</span><span class="p">});</span>          
<span class="p">});</span>

<span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="nx">router</span><span class="p">;</span>
</pre></td>
</tr></tbody></table></code></div></div>
<h3 id="step2-계층구조로-분리하기-routeslanguagesjs">[step2 계층구조로 분리하기] /routes/languages.js</h3>
<div lang="js" class="language-js highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr>
<td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre></td>
<td class="rouge-code"><pre><span class="p">...</span>
<span class="c1">// books 관련 api를 router로 대체. </span>
<span class="kd">const</span> <span class="nx">booksRouter</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">./languages/books.js</span><span class="dl">'</span><span class="p">);</span>
<span class="nx">router</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="dl">'</span><span class="s1">/:language_id/books</span><span class="dl">'</span><span class="p">,</span><span class="nx">booksRouter</span><span class="p">);</span>


<span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="nx">router</span><span class="p">;</span>
</pre></td>
</tr></tbody></table></code></div></div>
<p>여기서 독특한 점은 books.js 의 라우터를 선언하는 부분이다.<br> 기존의 express.Router()에 mergeParams: true 옵션을 부여했는데.</p>
<p>books 의 base url이 ‘/:language_id/books’ 인 것을 유의하여 보기바란다 ! :language_id 라는 이름의 파라미터를 받도록 되어있는데. 이는 languages router에서 받은 파라미터로<br> 자식 router인 books 에는 기본적으로 전달되지 않는다 ! (기본값 false)</p>
<p><strong>따라서 부모로부터 파라미터를 전달받고자 한다면 Router 선언시 mergeParams 옵션을 true로 주어서 부모의 파라미터를 상속받을 것이라고 정의해주어야한다.</strong></p>
<h2 id="step-3-indexjs-파일로-계층구조-깔끔하게-하기">Step 3 index.js 파일로 계층구조 깔끔하게 하기</h2>
<div class="table-wrapper"><table>
<thead><tr><th style="text-align: center"><img data-proofer-ignore data-src="/img/20210905003.png" alt="20210905003"></th></tr></thead>
<tbody><tr><td style="text-align: center"><em>Step2의 파일구조</em></td></tr></tbody>
</table></div>
<p>Step 2 사진을 보면 알겠지만, 사진처럼 languages 라는 폴더와 js 파일이 동일한 이름으로 존재하고 있다…<br> 이런식의 구조는 언뜻 보기에도 모호하고 정적 파일을 불러오는 입장에서도 이 것이 폴더인지 js인지 헷갈리기 때문에 상당히 좋지않다.<br> 결론부터 말하자면 index.js 파일을 이용해 모든 모듈을 폴더화 할 것인데.</p>
<p>공식문서 <a href="https://nodejs.org/docs/latest/api/modules.html#modules_folders_as_modules">Node.js modules_folders_as_modules</a>를 참고해보면 자세히 설명되어있다.</p>
<h3 id="packagesjson">packages.json</h3>
<p><img data-proofer-ignore data-src="/img/20210905004.png" alt="20210905004"></p>
<p>간략하게 설명하자면 <br> Node.js에서 package.json의 main 옵션 값에 따라 폴더를 로드할 때 해당 폴더안에 어떤 파일을 불러올 것이냐 정할 수 있다는 것이다. (미지정시 index.js 또는 index.node 가 불러와짐)</p>
<p>즉 나의 packages.json 설정에 따르면 require를 통해 모듈을 불러올 때 !</p>
<div lang="js" class="language-js highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr>
<td class="rouge-gutter gl"><pre class="lineno">1
</pre></td>
<td class="rouge-code"><pre><span class="kd">const</span> <span class="nx">module</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">./module</span><span class="dl">'</span><span class="p">);</span>
</pre></td>
</tr></tbody></table></code></div></div>
<p>만약 위처럼 확장자를 입력하지 않으면</p>
<ol>
<li>먼저 module.js 파일을 찾고, 만약 있다면 그 파일을 추출할 것이고</li>
<li><strong>만약 없다면 ? module 이라는 폴더를 찾아서 그 폴더의 index.js 파일을 찾아 추출할 것이다.</strong></li>
</ol>
<p>위와 같은 특징을 활용해서 계층구조를 깔끔하게 변경해보자.</p>
<hr>
<div class="table-wrapper"><table>
<thead><tr><th style="text-align: center"><img data-proofer-ignore data-src="/img/20210905005.png" alt="20210905005"></th></tr></thead>
<tbody><tr><td style="text-align: center"><em>index.js를 활용한 모듈구조</em></td></tr></tbody>
</table></div>
<p><strong>먼저 폴더 구조를 위와같이 구성하고 각 js파일의 이름을 index.js로 변경한다.</strong></p>
<h3 id="step3-indexjs-appjs">[step3 index.js] /app.js</h3>
<div lang="js" class="language-js highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr>
<td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre></td>
<td class="rouge-code"><pre><span class="kd">const</span> <span class="nx">app</span> <span class="o">=</span> <span class="nx">express</span><span class="p">();</span>
<span class="nx">app</span><span class="p">.</span><span class="kd">set</span><span class="p">(</span><span class="dl">'</span><span class="s1">port</span><span class="dl">'</span><span class="p">,</span> <span class="mi">3000</span><span class="p">);</span>
<span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="nx">express</span><span class="p">.</span><span class="nx">json</span><span class="p">());</span>

<span class="kd">const</span> <span class="nx">presidentsRouter</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">./routes/presidents</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">languagesRouter</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">./routes/languages</span><span class="dl">'</span><span class="p">);</span>

<span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="dl">'</span><span class="s1">/presidents</span><span class="dl">'</span><span class="p">,</span> <span class="nx">presidentsRouter</span><span class="p">);</span>
<span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="dl">'</span><span class="s1">/languages</span><span class="dl">'</span><span class="p">,</span> <span class="nx">languagesRouter</span><span class="p">);</span>
</pre></td>
</tr></tbody></table></code></div></div>
<h3 id="step3-indexjs-routeslanguagesindexjs">[step3 index.js] /routes/languages/index.js</h3>
<div lang="js" class="language-js highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr>
<td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre></td>
<td class="rouge-code"><pre><span class="kd">const</span> <span class="nx">booksRouter</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">./books</span><span class="dl">'</span><span class="p">);</span>
<span class="nx">router</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="dl">'</span><span class="s1">/:language_id/books</span><span class="dl">'</span><span class="p">,</span><span class="nx">booksRouter</span><span class="p">);</span>

<span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="nx">router</span><span class="p">;</span>
</pre></td>
</tr></tbody></table></code></div></div>
<p><strong>그리고 각 router를 장착하는 부분에서 require의 주소만 변경해주면 된다.(확장자는 제거!)</strong></p>
<h3 id="step3-indexjs-심화appjs의-router-장착부분도-분리하자">[step3 index.js] 심화(app.js의 router 장착부분도 분리하자)</h3>
<p>app.js는 라우팅 기능 말고도 여러 미들웨어를 불러오고 포트를 설정하는 등 많은 역할을 한다.<br> 따라서 여러 end-point에 따라 router를 장착하는 부분도 분리하여 관리하자</p>
<h3 id="step3-indexjs-routesindexjs">[step3 index.js] /routes/index.js</h3>
<div lang="js" class="language-js highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr>
<td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
</pre></td>
<td class="rouge-code"><pre><span class="kd">const</span> <span class="nx">express</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">express</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">router</span> <span class="o">=</span> <span class="nx">express</span><span class="p">.</span><span class="nx">Router</span><span class="p">();</span>

<span class="kd">const</span> <span class="nx">presidentsRouter</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">./presidents</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">languagesRouter</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">./languages</span><span class="dl">'</span><span class="p">);</span>

<span class="nx">router</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="dl">'</span><span class="s1">/presidents</span><span class="dl">'</span><span class="p">,</span> <span class="nx">presidentsRouter</span><span class="p">);</span>
<span class="nx">router</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="dl">'</span><span class="s1">/languages</span><span class="dl">'</span><span class="p">,</span> <span class="nx">languagesRouter</span><span class="p">);</span>

<span class="c1">// index</span>
<span class="nx">router</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">'</span><span class="s1">/</span><span class="dl">'</span><span class="p">,</span> <span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">res</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="dl">'</span><span class="s1">Hello Express!!</span><span class="dl">'</span><span class="p">);</span>
<span class="p">});</span>

<span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="nx">router</span><span class="p">;</span>
</pre></td>
</tr></tbody></table></code></div></div>
<h3 id="step3-indexjs-appjs-1">[step3 index.js] /app.js</h3>
<div lang="js" class="language-js highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr>
<td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre></td>
<td class="rouge-code"><pre><span class="p">...</span>
<span class="kd">const</span> <span class="nx">routes</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">./routes</span><span class="dl">'</span><span class="p">)</span>
<span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="dl">'</span><span class="s1">/</span><span class="dl">'</span><span class="p">,</span> <span class="nx">routes</span><span class="p">);</span>
<span class="p">...</span>
</pre></td>
</tr></tbody></table></code></div></div>
<h2 id="step-4-라우팅-기능과-서비스-로직을-분리하자">Step 4 라우팅 기능과 서비스 로직을 분리하자</h2>
<p>지금까지 따라왔다면 지금의 구조가 꽤나 만족스러울 수 있지만, 한가지 더 할 것이 있다.</p>
<p>router의 주 기능은 이름 그대로 길을 찾는 놈이다.</p>
<p>즉, end-point와 METHOD의 조합을 통해 특정 서비스 로직을 실행시키도록 도와주는 친구인데<br> 지금은 서비스 로직이 각 api와 밀접하게(?) 연결되어 있다.</p>
<p>극단적으로.. 동일한 기능을 수행하는데 end-point를 여러개 두고 싶다거나<br> (ex. /admin, /administrator, /admin-user 에서 모두 동일한 로직을 원해 !)<br> 아니면 어떤 리스트를 수정하는데 ‘전체 삭제 후 -&gt; 재등록’ 으로 로직을 구성하고자 할 때,<br> DELETE METHOD와 POST METHOD를 순차적으로 실행시키면 그만인 상황에서도 완전히 새로운 함수를 작성해야 할 수도 있다.</p>
<p>따라서 중복된 코드가 많이 사용될 것이고, 단순히 유지보수를 하기에도 불편하다.<br> 그래서 보통 Router는 길을 찾는 역할만 남겨두고 서비스 로직은 별도의 파일에서 관리하도록 한다.<br> (특히나 지금은 학습용 정적인 데이터를 가지고놀지만, 실제 프로젝트에선 DB를 조작하는 기능이 서비스로직에 포함될 것이다..)</p>
<div class="table-wrapper"><table>
<thead><tr><th style="text-align: center"><img data-proofer-ignore data-src="/img/20210905006.png" alt="20210905006"></th></tr></thead>
<tbody><tr><td style="text-align: center"><em>controller 파일 생성</em></td></tr></tbody>
</table></div>
<p><strong>먼저 각 end-point폴더의 index.js와 같은 경로에 controller 파일을 만든다.</strong></p>
<h3 id="step4-라우팅서비스로직-분리-routeslanguagesbooksbookscontrollerjs">[step4 라우팅/서비스로직 분리] /routes/languages/books/books.controller.js</h3>
<div lang="js" class="language-js highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr>
<td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
</pre></td>
<td class="rouge-code"><pre><span class="kd">let</span> <span class="nx">languages</span> <span class="o">=</span> <span class="p">[</span> <span class="c1">//프로그래밍 언어들</span>
    <span class="p">{</span><span class="na">id</span> <span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="na">name</span> <span class="p">:</span> <span class="dl">'</span><span class="s1">C</span><span class="dl">'</span><span class="p">},</span>
    <span class="p">{</span><span class="na">id</span> <span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="na">name</span> <span class="p">:</span> <span class="dl">'</span><span class="s1">C++</span><span class="dl">'</span><span class="p">},</span>
    <span class="p">{</span><span class="na">id</span> <span class="p">:</span> <span class="mi">3</span><span class="p">,</span> <span class="na">name</span> <span class="p">:</span> <span class="dl">'</span><span class="s1">C#</span><span class="dl">'</span><span class="p">},</span>
    <span class="p">{</span><span class="na">id</span> <span class="p">:</span> <span class="mi">4</span><span class="p">,</span> <span class="na">name</span> <span class="p">:</span> <span class="dl">'</span><span class="s1">JAVA</span><span class="dl">'</span><span class="p">},</span>
    <span class="p">{</span><span class="na">id</span> <span class="p">:</span> <span class="mi">5</span><span class="p">,</span> <span class="na">name</span> <span class="p">:</span> <span class="dl">'</span><span class="s1">Cotlin</span><span class="dl">'</span><span class="p">},</span>
    <span class="p">{</span><span class="na">id</span> <span class="p">:</span> <span class="mi">6</span><span class="p">,</span> <span class="na">name</span> <span class="p">:</span> <span class="dl">'</span><span class="s1">Javascript</span><span class="dl">'</span><span class="p">},</span>
    <span class="p">{</span><span class="na">id</span> <span class="p">:</span> <span class="mi">7</span><span class="p">,</span> <span class="na">name</span> <span class="p">:</span> <span class="dl">'</span><span class="s1">python</span><span class="dl">'</span><span class="p">},</span>
    <span class="p">{</span><span class="na">id</span> <span class="p">:</span> <span class="mi">8</span><span class="p">,</span> <span class="na">name</span> <span class="p">:</span> <span class="dl">'</span><span class="s1">PHP</span><span class="dl">'</span><span class="p">},</span>
    <span class="p">{</span><span class="na">id</span> <span class="p">:</span> <span class="mi">9</span><span class="p">,</span> <span class="na">name</span> <span class="p">:</span> <span class="dl">'</span><span class="s1">Ruby</span><span class="dl">'</span><span class="p">},</span>
    <span class="p">{</span><span class="na">id</span> <span class="p">:</span> <span class="mi">10</span><span class="p">,</span> <span class="na">name</span> <span class="p">:</span> <span class="dl">'</span><span class="s1">Objective-C</span><span class="dl">'</span><span class="p">},</span>
    <span class="p">{</span><span class="na">id</span> <span class="p">:</span> <span class="mi">11</span><span class="p">,</span> <span class="na">name</span> <span class="p">:</span> <span class="dl">'</span><span class="s1">Swift</span><span class="dl">'</span><span class="p">}];</span>


<span class="kd">let</span> <span class="nx">books</span> <span class="o">=</span> <span class="p">[</span> <span class="c1">//프로그래밍 언어 관련 서적</span>
    <span class="p">{</span><span class="na">id</span> <span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="na">language_id</span> <span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="na">name</span> <span class="p">:</span> <span class="dl">'</span><span class="s1">혼자 공부하는 C언어</span><span class="dl">'</span><span class="p">},</span>
    <span class="p">{</span><span class="na">id</span> <span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="na">language_id</span> <span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="na">name</span> <span class="p">:</span> <span class="dl">'</span><span class="s1">Do it! C언어 입문</span><span class="dl">'</span><span class="p">},</span>
    <span class="p">{</span><span class="na">id</span> <span class="p">:</span> <span class="mi">3</span><span class="p">,</span> <span class="na">language_id</span> <span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="na">name</span> <span class="p">:</span> <span class="dl">'</span><span class="s1">열혈 C프로그래밍</span><span class="dl">'</span><span class="p">},</span>
    <span class="p">{</span><span class="na">id</span> <span class="p">:</span> <span class="mi">4</span><span class="p">,</span> <span class="na">language_id</span> <span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="na">name</span> <span class="p">:</span> <span class="dl">'</span><span class="s1">열혈 C++프로그래밍</span><span class="dl">'</span><span class="p">},</span>
    <span class="p">{</span><span class="na">id</span> <span class="p">:</span> <span class="mi">5</span><span class="p">,</span> <span class="na">language_id</span> <span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="na">name</span> <span class="p">:</span> <span class="dl">'</span><span class="s1">Effective Mordern C++</span><span class="dl">'</span><span class="p">},</span>
    <span class="p">{</span><span class="na">id</span> <span class="p">:</span> <span class="mi">6</span><span class="p">,</span> <span class="na">language_id</span> <span class="p">:</span> <span class="mi">3</span><span class="p">,</span> <span class="na">name</span> <span class="p">:</span> <span class="dl">'</span><span class="s1">C# 교과서</span><span class="dl">'</span><span class="p">},</span>
    <span class="p">{</span><span class="na">id</span> <span class="p">:</span> <span class="mi">7</span><span class="p">,</span> <span class="na">language_id</span> <span class="p">:</span> <span class="mi">3</span><span class="p">,</span> <span class="na">name</span> <span class="p">:</span> <span class="dl">'</span><span class="s1">유지보수 가능한 코딩의 기술 C#편</span><span class="dl">'</span><span class="p">},</span>
    <span class="p">{</span><span class="na">id</span> <span class="p">:</span> <span class="mi">8</span><span class="p">,</span> <span class="na">language_id</span> <span class="p">:</span> <span class="mi">4</span><span class="p">,</span> <span class="na">name</span> <span class="p">:</span> <span class="dl">'</span><span class="s1">JAVA의 정석</span><span class="dl">'</span><span class="p">},</span>
    <span class="p">{</span><span class="na">id</span> <span class="p">:</span> <span class="mi">9</span><span class="p">,</span> <span class="na">language_id</span> <span class="p">:</span> <span class="mi">4</span><span class="p">,</span> <span class="na">name</span> <span class="p">:</span> <span class="dl">'</span><span class="s1">이펙티브 자바</span><span class="dl">'</span><span class="p">},</span>
    <span class="p">{</span><span class="na">id</span> <span class="p">:</span> <span class="mi">10</span><span class="p">,</span> <span class="na">language_id</span> <span class="p">:</span> <span class="mi">5</span><span class="p">,</span> <span class="na">name</span> <span class="p">:</span> <span class="dl">'</span><span class="s1">이것이 안드로이드다 with 코틀린</span><span class="dl">'</span><span class="p">},</span>
    <span class="p">{</span><span class="na">id</span> <span class="p">:</span> <span class="mi">11</span><span class="p">,</span> <span class="na">language_id</span> <span class="p">:</span> <span class="mi">5</span><span class="p">,</span> <span class="na">name</span> <span class="p">:</span> <span class="dl">'</span><span class="s1">Do it! 깡샘의 안드로이드 앱 프로그래밍 with 코틀린</span><span class="dl">'</span><span class="p">},</span>
    <span class="p">{</span><span class="na">id</span> <span class="p">:</span> <span class="mi">12</span><span class="p">,</span> <span class="na">language_id</span> <span class="p">:</span> <span class="mi">6</span><span class="p">,</span> <span class="na">name</span> <span class="p">:</span> <span class="dl">'</span><span class="s1">실전에서 써먹는 JavaScript</span><span class="dl">'</span><span class="p">},</span>
    <span class="p">{</span><span class="na">id</span> <span class="p">:</span> <span class="mi">13</span><span class="p">,</span> <span class="na">language_id</span> <span class="p">:</span> <span class="mi">6</span><span class="p">,</span> <span class="na">name</span> <span class="p">:</span> <span class="dl">'</span><span class="s1">읽기 좋은 자바스크립트 코딩기법</span><span class="dl">'</span><span class="p">},</span>
    <span class="p">{</span><span class="na">id</span> <span class="p">:</span> <span class="mi">14</span><span class="p">,</span> <span class="na">language_id</span> <span class="p">:</span> <span class="mi">7</span><span class="p">,</span> <span class="na">name</span> <span class="p">:</span> <span class="dl">'</span><span class="s1">데이터 분석을 위한 파이썬</span><span class="dl">'</span><span class="p">},</span>
    <span class="p">{</span><span class="na">id</span> <span class="p">:</span> <span class="mi">15</span><span class="p">,</span> <span class="na">language_id</span> <span class="p">:</span> <span class="mi">7</span><span class="p">,</span> <span class="na">name</span> <span class="p">:</span> <span class="dl">'</span><span class="s1">점프 투 파이썬</span><span class="dl">'</span><span class="p">},</span>
    <span class="p">{</span><span class="na">id</span> <span class="p">:</span> <span class="mi">16</span><span class="p">,</span> <span class="na">language_id</span> <span class="p">:</span> <span class="mi">8</span><span class="p">,</span> <span class="na">name</span> <span class="p">:</span> <span class="dl">'</span><span class="s1">넘버투 PHP</span><span class="dl">'</span><span class="p">},</span>
    <span class="p">{</span><span class="na">id</span> <span class="p">:</span> <span class="mi">17</span><span class="p">,</span> <span class="na">language_id</span> <span class="p">:</span> <span class="mi">11</span><span class="p">,</span> <span class="na">name</span> <span class="p">:</span> <span class="dl">'</span><span class="s1">Swift 프로그래밍</span><span class="dl">'</span><span class="p">}];</span>    


<span class="nx">exports</span><span class="p">.</span><span class="nx">getBooks</span> <span class="o">=</span> <span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">req</span><span class="p">.</span><span class="nx">params</span><span class="p">.</span><span class="nx">language_id</span><span class="p">);</span>   
    <span class="kd">const</span> <span class="nx">foundLanguage</span> <span class="o">=</span> <span class="nx">languages</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="nx">x</span><span class="o">=&gt;</span><span class="nx">x</span><span class="p">.</span><span class="nx">id</span> <span class="o">==</span> <span class="nx">req</span><span class="p">.</span><span class="nx">params</span><span class="p">.</span><span class="nx">language_id</span><span class="p">);</span>
    <span class="k">if</span><span class="p">(</span><span class="nx">foundLanguage</span><span class="p">){</span>
        <span class="kd">const</span> <span class="nx">filteredBooks</span> <span class="o">=</span> <span class="nx">books</span><span class="p">.</span><span class="nx">filter</span><span class="p">(</span><span class="nx">x</span><span class="o">=&gt;</span> <span class="nx">x</span><span class="p">.</span><span class="nx">language_id</span> <span class="o">==</span> <span class="nx">req</span><span class="p">.</span><span class="nx">params</span><span class="p">.</span><span class="nx">language_id</span><span class="p">);</span>    
        <span class="nx">res</span><span class="p">.</span><span class="nx">status</span><span class="p">(</span><span class="mi">200</span><span class="p">).</span><span class="nx">json</span><span class="p">({</span> <span class="na">message</span> <span class="p">:</span> <span class="dl">'</span><span class="s1">success</span><span class="dl">'</span><span class="p">,</span> <span class="na">data_list</span> <span class="p">:</span> <span class="nx">filteredBooks</span><span class="p">});</span> 
    <span class="p">}</span><span class="k">else</span> <span class="nx">res</span><span class="p">.</span><span class="nx">status</span><span class="p">(</span><span class="mi">400</span><span class="p">).</span><span class="nx">json</span><span class="p">({</span> <span class="na">message</span> <span class="p">:</span> <span class="dl">'</span><span class="s1">language not found</span><span class="dl">'</span><span class="p">});</span> 
<span class="p">};</span>

<span class="nx">exports</span><span class="p">.</span><span class="nx">createBook</span> <span class="o">=</span> <span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">foundLanguage</span> <span class="o">=</span> <span class="nx">languages</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="nx">x</span><span class="o">=&gt;</span><span class="nx">x</span><span class="p">.</span><span class="nx">id</span> <span class="o">==</span> <span class="nx">req</span><span class="p">.</span><span class="nx">params</span><span class="p">.</span><span class="nx">language_id</span><span class="p">);</span>
    <span class="k">if</span><span class="p">(</span><span class="nx">foundLanguage</span><span class="p">){</span>
        <span class="k">if</span><span class="p">(</span><span class="nx">req</span><span class="p">.</span><span class="nx">body</span> <span class="o">&amp;&amp;</span> <span class="nx">req</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">name</span><span class="p">){</span>
            <span class="kd">const</span> <span class="nx">newBook</span> <span class="o">=</span> <span class="p">{</span><span class="na">id</span><span class="p">:</span> <span class="nx">books</span><span class="p">.</span><span class="nx">length</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="na">language_id</span> <span class="p">:</span> <span class="nb">Number</span><span class="p">(</span><span class="nx">req</span><span class="p">.</span><span class="nx">params</span><span class="p">.</span><span class="nx">language_id</span><span class="p">),</span> <span class="na">name</span> <span class="p">:</span> <span class="nx">req</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">name</span><span class="p">};</span>
            <span class="nx">books</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">newBook</span><span class="p">);</span>
            <span class="nx">res</span><span class="p">.</span><span class="nx">status</span><span class="p">(</span><span class="mi">200</span><span class="p">).</span><span class="nx">json</span><span class="p">({</span> <span class="na">message</span> <span class="p">:</span> <span class="dl">'</span><span class="s1">success</span><span class="dl">'</span><span class="p">,</span> <span class="na">data</span> <span class="p">:</span> <span class="nx">newBook</span><span class="p">});</span> 
        <span class="p">}</span><span class="k">else</span> <span class="nx">res</span><span class="p">.</span><span class="nx">status</span><span class="p">(</span><span class="mi">400</span><span class="p">).</span><span class="nx">json</span><span class="p">({</span> <span class="na">message</span> <span class="p">:</span> <span class="dl">'</span><span class="s1">name(body) is required</span><span class="dl">'</span><span class="p">});</span>         
    <span class="p">}</span><span class="k">else</span> <span class="nx">res</span><span class="p">.</span><span class="nx">status</span><span class="p">(</span><span class="mi">404</span><span class="p">).</span><span class="nx">json</span><span class="p">({</span> <span class="na">message</span> <span class="p">:</span> <span class="dl">'</span><span class="s1">language not found</span><span class="dl">'</span><span class="p">});</span> 
<span class="p">};</span>

<span class="nx">exports</span><span class="p">.</span><span class="nx">updateBook</span> <span class="o">=</span> <span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">foundLanguage</span> <span class="o">=</span> <span class="nx">languages</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="nx">x</span><span class="o">=&gt;</span><span class="nx">x</span><span class="p">.</span><span class="nx">id</span> <span class="o">==</span> <span class="nx">req</span><span class="p">.</span><span class="nx">params</span><span class="p">.</span><span class="nx">language_id</span><span class="p">);</span>
    <span class="k">if</span><span class="p">(</span><span class="nx">foundLanguage</span><span class="p">){</span>
        <span class="k">if</span><span class="p">(</span><span class="nx">req</span><span class="p">.</span><span class="nx">body</span> <span class="o">&amp;&amp;</span> <span class="nx">req</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">id</span> <span class="o">&amp;&amp;</span> <span class="nx">req</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">name</span><span class="p">){</span>
            <span class="kd">const</span> <span class="nx">filteredBooks</span> <span class="o">=</span> <span class="nx">books</span><span class="p">.</span><span class="nx">filter</span><span class="p">(</span><span class="nx">x</span><span class="o">=&gt;</span><span class="nx">x</span><span class="p">.</span><span class="nx">language_id</span> <span class="o">==</span> <span class="nx">req</span><span class="p">.</span><span class="nx">params</span><span class="p">.</span><span class="nx">language_id</span><span class="p">);</span>
            <span class="kd">const</span> <span class="nx">foundBook</span> <span class="o">=</span> <span class="nx">filteredBooks</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="nx">x</span><span class="o">=&gt;</span><span class="nx">x</span><span class="p">.</span><span class="nx">id</span> <span class="o">==</span> <span class="nx">req</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">id</span><span class="p">);</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">foundBook</span><span class="p">){</span>
                <span class="nx">foundBook</span><span class="p">.</span><span class="nx">name</span> <span class="o">=</span> <span class="nx">req</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">name</span><span class="p">;</span>
                <span class="nx">res</span><span class="p">.</span><span class="nx">status</span><span class="p">(</span><span class="mi">200</span><span class="p">).</span><span class="nx">json</span><span class="p">({</span> <span class="na">message</span> <span class="p">:</span> <span class="dl">'</span><span class="s1">success</span><span class="dl">'</span><span class="p">,</span> <span class="na">data</span> <span class="p">:</span> <span class="nx">foundBook</span><span class="p">});</span>
            <span class="p">}</span><span class="k">else</span> <span class="nx">res</span><span class="p">.</span><span class="nx">status</span><span class="p">(</span><span class="mi">404</span><span class="p">).</span><span class="nx">json</span><span class="p">({</span> <span class="na">message</span> <span class="p">:</span> <span class="dl">'</span><span class="s1">book not found</span><span class="dl">'</span><span class="p">});</span>
        <span class="p">}</span><span class="k">else</span> <span class="nx">res</span><span class="p">.</span><span class="nx">status</span><span class="p">(</span><span class="mi">400</span><span class="p">).</span><span class="nx">json</span><span class="p">({</span> <span class="na">message</span> <span class="p">:</span> <span class="dl">'</span><span class="s1">id, name(body) is required</span><span class="dl">'</span><span class="p">});</span>
    <span class="p">}</span><span class="k">else</span> <span class="nx">res</span><span class="p">.</span><span class="nx">status</span><span class="p">(</span><span class="mi">404</span><span class="p">).</span><span class="nx">json</span><span class="p">({</span> <span class="na">message</span> <span class="p">:</span> <span class="dl">'</span><span class="s1">language not found</span><span class="dl">'</span><span class="p">});</span> 
<span class="p">};</span>

<span class="nx">exports</span><span class="p">.</span><span class="nx">deleteBook</span> <span class="o">=</span> <span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">foundLanguage</span> <span class="o">=</span> <span class="nx">languages</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="nx">x</span><span class="o">=&gt;</span><span class="nx">x</span><span class="p">.</span><span class="nx">id</span> <span class="o">==</span> <span class="nx">req</span><span class="p">.</span><span class="nx">params</span><span class="p">.</span><span class="nx">language_id</span><span class="p">);</span>
    <span class="k">if</span><span class="p">(</span><span class="nx">foundLanguage</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">const</span> <span class="nx">foundIndex</span> <span class="o">=</span> <span class="nx">books</span><span class="p">.</span><span class="nx">findIndex</span><span class="p">(</span><span class="nx">x</span><span class="o">=&gt;</span><span class="nx">x</span><span class="p">.</span><span class="nx">id</span> <span class="o">==</span> <span class="nx">req</span><span class="p">.</span><span class="nx">params</span><span class="p">.</span><span class="nx">id</span><span class="p">);</span>         
        <span class="k">if</span><span class="p">(</span><span class="nx">foundIndex</span> <span class="o">!=</span> <span class="o">-</span><span class="mi">1</span><span class="p">){</span>
            <span class="nx">books</span><span class="p">.</span><span class="nx">splice</span><span class="p">(</span><span class="nx">foundIndex</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
            <span class="nx">res</span><span class="p">.</span><span class="nx">status</span><span class="p">(</span><span class="mi">200</span><span class="p">).</span><span class="nx">json</span><span class="p">({</span> <span class="na">message</span> <span class="p">:</span> <span class="dl">'</span><span class="s1">success</span><span class="dl">'</span><span class="p">});</span> 
        <span class="p">}</span><span class="k">else</span> <span class="nx">res</span><span class="p">.</span><span class="nx">status</span><span class="p">(</span><span class="mi">404</span><span class="p">).</span><span class="nx">json</span><span class="p">({</span> <span class="na">message</span> <span class="p">:</span> <span class="dl">'</span><span class="s1">book not found</span><span class="dl">'</span><span class="p">});</span> 
    <span class="p">}</span> <span class="k">else</span> <span class="nx">res</span><span class="p">.</span><span class="nx">status</span><span class="p">(</span><span class="mi">404</span><span class="p">).</span><span class="nx">json</span><span class="p">({</span> <span class="na">message</span> <span class="p">:</span> <span class="dl">'</span><span class="s1">language not found</span><span class="dl">'</span><span class="p">});</span>          
<span class="p">};</span>
</pre></td>
</tr></tbody></table></code></div></div>
<p><strong>다음과 같이 서비스로직 함수를 모두 분리하여 export한다</strong></p>
<h3 id="step4-라우팅서비스로직-분리-routeslanguagesbooksindexjs">[step4 라우팅/서비스로직 분리] /routes/languages/books/index.js</h3>
<div lang="js" class="language-js highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr>
<td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
</pre></td>
<td class="rouge-code"><pre><span class="kd">const</span> <span class="nx">express</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">express</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">router</span> <span class="o">=</span> <span class="nx">express</span><span class="p">.</span><span class="nx">Router</span><span class="p">({</span><span class="na">mergeParams</span><span class="p">:</span> <span class="kc">true</span><span class="p">});</span> <span class="c1">// 부모의 매개변수를 상속받도록 함</span>

<span class="c1">// ==============프로그래밍언어 책 리스트===================</span>
<span class="kd">const</span> <span class="nx">controller</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">./books.controller</span><span class="dl">'</span><span class="p">);</span>
<span class="c1">// 특정 언어의 책 리스트를 리턴</span>
<span class="nx">router</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">'</span><span class="s1">/</span><span class="dl">'</span><span class="p">,</span> <span class="nx">controller</span><span class="p">.</span><span class="nx">getBooks</span><span class="p">);</span>
<span class="c1">// 특정 언어의 책 추가</span>
<span class="nx">router</span><span class="p">.</span><span class="nx">post</span><span class="p">(</span><span class="dl">'</span><span class="s1">/</span><span class="dl">'</span><span class="p">,</span> <span class="nx">controller</span><span class="p">.</span><span class="nx">createBook</span><span class="p">);</span>
<span class="c1">// 특정 언어의 책 수정</span>
<span class="nx">router</span><span class="p">.</span><span class="nx">put</span><span class="p">(</span><span class="dl">'</span><span class="s1">/</span><span class="dl">'</span><span class="p">,</span> <span class="nx">controller</span><span class="p">.</span><span class="nx">updateBook</span><span class="p">);</span>
<span class="c1">// 특정 언어의 책 삭제</span>
<span class="nx">router</span><span class="p">.</span><span class="k">delete</span><span class="p">(</span><span class="dl">'</span><span class="s1">/:id</span><span class="dl">'</span><span class="p">,</span> <span class="nx">controller</span><span class="p">.</span><span class="nx">deleteBook</span><span class="p">);</span>

<span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="nx">router</span><span class="p">;</span>
</pre></td>
</tr></tbody></table></code></div></div>
<p><strong>index.js엔 라우팅 기능만 남긴다</strong></p>
<div class="table-wrapper"><table>
<thead><tr><th style="text-align: center"><img data-proofer-ignore data-src="/img/20210905007.png" alt="20210905007"></th></tr></thead>
<tbody><tr><td style="text-align: center"><em>최종 프로젝트 route 구조</em></td></tr></tbody>
</table></div>
<h2 id="마치며">마치며</h2>
<p>내용은 간단하지만 이 글을 작성하는데 생각보다 시간이 오래걸렸다. 지금까지 조금 모호하게 생각하고 있었던 router의 개념과 api의 end-point 명명 규칙등을 확실하게 알게되어 좋았고,<br> 보다더 구조적인 설계를 위해 시작단계에서 많은 고민이 필요하다는 것을 알게되었다. (찍어내기 바쁜 코딩은 이제 그만 ~ )<br> 실무에서도 처음 이 회사에 입사하고 프로젝트 구조나 api 서버 설계를 하기 전에, 이런 규칙이나 개념들을 먼저 알았더라면 더 좋은 시스템을 만들 수 있었을텐데 하는 후회가 밀려왔다. 지금와서 보면 참 부족한게 많은 시스템이다.<br> 이런 기본상식은 미리미리 배워두는게 좋겠다.</p>
<p>저번주부터 회사 업무로 기존의 api 서버에 v2 모듈을 붙이는 등, 새로운 데이터 모델과 비즈니스 로직을 설계&amp;구현해야 했는데.<br> 처음으로 기능명세서 부터 erd, 데이터베이스 설계서, view query, api설계서 등 문서를 먼저 작성해보았고 깊게 고민하는 시간을 가졌는데 (다행히 시간적 여유가 있어서..ㅎㅎ)<br> 이 글을 작성하면서 배운 지식이 생각보다 많은 도움이 되었다! <br> 이렇게 하나씩 배워가는거겠지.</p>
</div>
<div class="post-tail-wrapper text-muted">
<div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href="/categories/backend/">Backend</a>, <a href="/categories/node-js/">Node.js</a>
</div>
<div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/node-js/" class="post-tag no-text-decoration">Node.js</a> <a href="/tags/express/" class="post-tag no-text-decoration">express</a> <a href="/tags/router/" class="post-tag no-text-decoration">router</a> <a href="/tags/api/" class="post-tag no-text-decoration">api</a> <a href="/tags/end-point/" class="post-tag no-text-decoration">end-point</a>
</div>
<div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2">
<div class="license-wrapper"></div>
<div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=%5Bnode.js%5D%20express%20router%EC%99%80%20rest%20api%20%EC%97%94%EB%93%9C%ED%8F%AC%EC%9D%B8%ED%8A%B8%20%EB%84%A4%EC%9D%B4%EB%B0%8D%20%EA%B7%9C%EC%B9%99%20-%20%EB%A8%B8%EB%A6%AC%EC%86%8D%EC%97%90%20%EB%8B%A4%20%EC%9E%88%EC%96%B4%EC%9A%94&amp;url=/posts/Node.js-Express-Router%EC%99%80-REST-API-%EC%97%94%EB%93%9C%ED%8F%AC%EC%9D%B8%ED%8A%B8-%EB%84%A4%EC%9D%B4%EB%B0%8D-%EA%B7%9C%EC%B9%99/" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=%5Bnode.js%5D%20express%20router%EC%99%80%20rest%20api%20%EC%97%94%EB%93%9C%ED%8F%AC%EC%9D%B8%ED%8A%B8%20%EB%84%A4%EC%9D%B4%EB%B0%8D%20%EA%B7%9C%EC%B9%99%20-%20%EB%A8%B8%EB%A6%AC%EC%86%8D%EC%97%90%20%EB%8B%A4%20%EC%9E%88%EC%96%B4%EC%9A%94&amp;u=/posts/Node.js-Express-Router%EC%99%80-REST-API-%EC%97%94%EB%93%9C%ED%8F%AC%EC%9D%B8%ED%8A%B8-%EB%84%A4%EC%9D%B4%EB%B0%8D-%EA%B7%9C%EC%B9%99/" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://telegram.me/share?text=%5Bnode.js%5D%20express%20router%EC%99%80%20rest%20api%20%EC%97%94%EB%93%9C%ED%8F%AC%EC%9D%B8%ED%8A%B8%20%EB%84%A4%EC%9D%B4%EB%B0%8D%20%EA%B7%9C%EC%B9%99%20-%20%EB%A8%B8%EB%A6%AC%EC%86%8D%EC%97%90%20%EB%8B%A4%20%EC%9E%88%EC%96%B4%EC%9A%94&amp;url=/posts/Node.js-Express-Router%EC%99%80-REST-API-%EC%97%94%EB%93%9C%ED%8F%AC%EC%9D%B8%ED%8A%B8-%EB%84%A4%EC%9D%B4%EB%B0%8D-%EA%B7%9C%EC%B9%99/" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <i class="fa-fw fas fa-link small" onclick="copyLink('', '')" data-toggle="tooltip" data-placement="top" title=""> </i> </span>
</div>
</div>
</div>
</div></div>
<div id="panel-wrapper" class="col-xl-3 pl-2 text-muted topbar-down">
<div class="access">
<div id="access-lastmod" class="post"> <span>Recent Update</span><ul class="post-content pl-0 pb-1 ml-1 mt-2">
<li><a href="/posts/Web-SSR(%EC%84%9C%EB%B2%84%EC%82%AC%EC%9D%B4%EB%93%9C-%EB%A0%8C%EB%8D%94%EB%A7%81)%EC%9D%B4-%EB%8C%80%EC%B2%B4-%EB%AD%90%EC%95%BC/">[Web] SSR(서버사이드 렌더링)이 대체 뭐야?</a></li>
<li><a href="/posts/%EC%9C%84%EB%8C%80%ED%95%9C-%EC%97%AC%EC%A0%95%EC%9D%98-%EC%8B%9C%EC%9E%91/">위대한 여정의 시작</a></li>
<li><a href="/posts/Postgresql-%ED%8A%B8%EB%A6%AC%EA%B1%B0%EB%A5%BC-%EB%B0%B0%EC%9B%8C%EB%B3%B4%EC%9E%90/">[postgresql] 트리거를 배워보자</a></li>
<li><a href="/posts/Node.js-Express-%ED%94%84%EB%A0%88%EC%9E%84%EC%9B%8C%ED%81%AC-%EC%84%A4%EC%B9%98/">[node.js] express 프레임워크 설치</a></li>
<li><a href="/posts/%EB%A9%94%ED%83%80%EB%B2%84%EC%8A%A4%EC%97%90-%EB%8C%80%ED%95%9C-%EC%83%9D%EA%B0%81/">메타버스에 대한 생각</a></li>
</ul>
</div>
<div id="access-tags"> <span>Trending Tags</span><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/express/">express</a> <a class="post-tag" href="/tags/node-js/">Node.js</a> <a class="post-tag" href="/tags/api/">api</a> <a class="post-tag" href="/tags/db/">db</a> <a class="post-tag" href="/tags/client-side-rendering/">CLIENT SIDE RENDERING</a> <a class="post-tag" href="/tags/cookie-parser/">cookie-parser</a> <a class="post-tag" href="/tags/csr/">CSR</a> <a class="post-tag" href="/tags/dotenv/">dotenv</a> <a class="post-tag" href="/tags/end-point/">end-point</a> <a class="post-tag" href="/tags/extends/">extends</a>
</div>
</div>
</div>
<script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.js"></script><div id="toc-wrapper" class="pl-0 pr-4 mb-5"> <span class="pl-3 pt-2 mb-2">Contents</span><nav id="toc" data-toggle="toc"></nav>
</div>
</div>
</div>
<div class="row"><div class="col-12 col-lg-11 col-xl-8"><div id="post-extend-wrapper" class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4">
<div id="related-posts" class="mt-5 mb-2 mb-sm-4">
<h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>Further Reading</h3>
<div class="card-deck mb-4">
<div class="card"> <a href="/posts/node.js-sequelize(%EC%8B%9C%ED%80%84%EB%9D%BC%EC%9D%B4%EC%A6%88)%EB%A5%BC-%EC%82%AC%EC%9A%A9%ED%95%B4%EC%84%9C-RDB%EC%99%80-%ED%86%B5%EC%8B%A0%ED%95%98%EA%B8%B0/"><div class="card-body"> <span class="timeago small">Sep 8<i class="unloaded">2021-09-08T00:00:00+09:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>[node.js] sequelize(시퀄라이즈)를 사용해서 rdb와 통신하기</h3>
<div class="text-muted small"><p> Api 서버를 구축하고자 할 때 DB와의 연결은 필수적이라고 할 수 있다. 오늘은 시퀄라이즈 라이브러리를 사용해서 DB와 연결하고 CRUD 기능을 수행해보자. 시퀄라이즈 ? 다양한 RDB와 호환되는 ORM(Object Relational Mapping) 라이브러리. (ex. maria, postgre, sqlite, mssql .. ) ...</p></div>
</div></a>
</div>
<div class="card"> <a href="/posts/Node.js-Express-%ED%94%84%EB%A0%88%EC%9E%84%EC%9B%8C%ED%81%AC-%EC%84%A4%EC%B9%98/"><div class="card-body"> <span class="timeago small">Aug 27<i class="unloaded">2021-08-27T00:00:00+09:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>[node.js] express 프레임워크 설치</h3>
<div class="text-muted small"><p> Express.js 프레임워크란 ? Node.js를 위한 웹 프레임워크의 하나로 자바스크립트 런타임 환경에서 웹 어플리케이션을 편하게 개발하기 위한 각종 라이브러리와 미들웨어들이 기본 내장되어 있고 프레임워크로서 개발 규칙을 강제하여 코드 구조를 간결하고 통일성있게 유지시켜주는 도구이다. (Express는 유연한 편이다.) Node.js 웹 프레임워...</p></div>
</div></a>
</div>
<div class="card"> <a href="/posts/Node.js-Express-%ED%94%84%EB%A0%88%EC%9E%84%EC%9B%8C%ED%81%AC%EC%9D%98-%EB%AF%B8%EB%93%A4%EC%9B%A8%EC%96%B4/"><div class="card-body"> <span class="timeago small">Aug 30<i class="unloaded">2021-08-30T00:00:00+09:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>[node.js] express 프레임워크의 미들웨어</h3>
<div class="text-muted small"><p> 미들웨어란 ? 익스프레스는 가볍고 유연한 웹 프레임워크인데, 이 것은 미들웨어 구조 덕분에 가능한 것이다. 미들웨어는 어플리케이션의 호출과 응답 사이, 즉 중간(middle)에 위치해 요청을 처리하기 때문에 미들웨어라고 한다. 미들웨어는 req, res, next를 매개변수로 가진 함수이다. req, res에 접근해 요청과 응답을 조작할 수 있으...</p></div>
</div></a>
</div>
</div>
</div>
<div class="post-navigation d-flex justify-content-between"> <a href="/posts/Node.js-Express-%EC%9E%90%EC%A3%BC-%EC%82%AC%EC%9A%A9%ED%95%98%EB%8A%94-%EB%AF%B8%EB%93%A4%EC%9B%A8%EC%96%B4/" class="btn btn-outline-primary" prompt="previous"><p>[node.js] express 자주 사용하는 미들웨어</p></a> <a href="/posts/210907-%EC%9D%BC%EA%B8%B0/" class="btn btn-outline-primary" prompt="next"><p>210907 일기</p></a>
</div>
</div></div></div>
<footer class="d-flex w-100 justify-content-center"><div class="d-flex justify-content-between align-items-center">
<div class="footer-left"><p class="mb-0"> © 2021 <a href="https://github.com/jaeone94">Jaeone94</a>.</p></div>
<div class="footer-right"><p class="mb-0"> Powered by <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> with <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> theme.</p></div>
</div></footer>
</div>
<div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content">
<div id="search-hints">
<h4 class="text-muted mb-4">Trending Tags</h4>
<a class="post-tag" href="/tags/express/">express</a> <a class="post-tag" href="/tags/node-js/">Node.js</a> <a class="post-tag" href="/tags/api/">api</a> <a class="post-tag" href="/tags/db/">db</a> <a class="post-tag" href="/tags/client-side-rendering/">CLIENT SIDE RENDERING</a> <a class="post-tag" href="/tags/cookie-parser/">cookie parser</a> <a class="post-tag" href="/tags/csr/">CSR</a> <a class="post-tag" href="/tags/dotenv/">dotenv</a> <a class="post-tag" href="/tags/end-point/">end point</a> <a class="post-tag" href="/tags/extends/">extends</a>
</div>
<div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div>
</div></div>
</div><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.7.3/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No result founds.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script> <script src="https://cdn.jsdelivr.net/combine/npm/lozad/dist/lozad.min.js,npm/magnific-popup@1/dist/jquery.magnific-popup.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script src="https://cdn.jsdelivr.net/combine/npm/popper.js@1.16.1,npm/bootstrap@4/dist/js/bootstrap.min.js"></script> <script defer src="/app.js"></script> <script defer src="https://www.googletagmanager.com/gtag/js?id="></script> <script> document.addEventListener("DOMContentLoaded", function(event) { window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', ''); }); </script>
